import{$ as M,Fa as S,Kb as m,Lb as N,Rb as _,Sb as u,Tb as B,Ub as x,Yb as D,fa as T,ga as d,ha as A,ia as E,na as b,qa as R,sa as H,xb as k}from"./chunk-4CCWYKQJ.js";var l,I=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{l===void 0&&(l=D("canvas")),l.width=t.width,l.height=t.height;let a=l.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),i=l}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let i=D("canvas");i.width=t.width,i.height=t.height;let a=i.getContext("2d");a.drawImage(t,0,0,t.width,t.height);let s=a.getImageData(0,0,t.width,t.height),n=s.data;for(let r=0;r<n.length;r++)n[r]=x(n[r]/255)*255;return a.putImageData(s,0,0),i}else if(t.data){let i=t.data.slice(0);for(let a=0;a<i.length;a++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[a]=Math.floor(x(i[a]/255)*255):i[a]=x(i[a]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}};var y=class{constructor(t=null){this.uuid=m(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let a={uuid:this.uuid,url:""},s=this.data;if(s!==null){let n;if(Array.isArray(s)){n=[];for(let r=0,c=s.length;r<c;r++)s[r].isDataTexture?n.push(L(s[r].image)):n.push(L(s[r]))}else n=L(s);a.url=n}return i||(t.images[this.uuid]=a),a}};function L(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?I.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}y.prototype.isSource=!0;var W=0,p=class extends B{constructor(t=p.DEFAULT_IMAGE,i=p.DEFAULT_MAPPING,a=d,s=d,n=b,r=R,c=S,g=H,w=1,U=k){super();Object.defineProperty(this,"id",{value:W++}),this.uuid=m(),this.name="",this.source=new y(t),this.mipmaps=[],this.mapping=i,this.wrapS=a,this.wrapT=s,this.magFilter=n,this.minFilter=r,this.anisotropy=w,this.format=c,this.internalFormat=null,this.type=g,this.offset=new u(0,0),this.repeat=new u(1,1),this.center=new u(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=U,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let a={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),i||(t.textures[this.uuid]=a),a}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==M)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case T:t.x=t.x-Math.floor(t.x);break;case d:t.x=t.x<0?0:1;break;case A:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case T:t.y=t.y-Math.floor(t.y);break;case d:t.y=t.y<0?0:1;break;case A:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};p.DEFAULT_IMAGE=null;p.DEFAULT_MAPPING=M;p.prototype.isTexture=!0;var C=class extends p{constructor(t=null,i=1,a=1,s,n,r,c,g,w=E,U=E,P,j){super(null,r,c,g,w,U,s,n,P,j);this.image={data:t,width:i,height:a},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};C.prototype.isDataTexture=!0;var z=class{static toHalfFloat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=N(t,-65504,65504),O[0]=t;let i=G[0],a=i>>23&511;return o[a]+((i&8388607)>>h[a])}static fromHalfFloat(t){let i=t>>10;return G[0]=F[Y[i]+(t&1023)]+f[i],O[0]}},J=new ArrayBuffer(4),O=new Float32Array(J),G=new Uint32Array(J),o=new Uint32Array(512),h=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(o[e]=0,o[e|256]=32768,h[e]=24,h[e|256]=24):t<-14?(o[e]=1024>>-t-14,o[e|256]=1024>>-t-14|32768,h[e]=-t-1,h[e|256]=-t-1):t<=15?(o[e]=t+15<<10,o[e|256]=t+15<<10|32768,h[e]=13,h[e|256]=13):t<128?(o[e]=31744,o[e|256]=64512,h[e]=24,h[e|256]=24):(o[e]=31744,o[e|256]=64512,h[e]=13,h[e|256]=13)}var F=new Uint32Array(2048),f=new Uint32Array(64),Y=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;(t&8388608)===0;)t<<=1,i-=8388608;t&=-8388609,i+=947912704,F[e]=t|i}for(let e=1024;e<2048;++e)F[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)f[e]=e<<23;f[31]=1199570944;f[32]=2147483648;for(let e=33;e<63;++e)f[e]=2147483648+(e-32<<23);f[63]=3347054592;for(let e=1;e<64;++e)e!==32&&(Y[e]=1024);export{I as a,y as b,p as c,C as d,z as e};
