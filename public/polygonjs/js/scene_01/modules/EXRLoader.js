import"../chunk-BYXBJQAS.js";import{d as zr,e as Yn}from"../chunk-BAQ4QMUF.js";import{$b as Tr,Fa as Ar,Ka as Cr,ac as Nr,ga as Xn,na as Ke,qa as Ur,xb as Gn,ya as Fn,za as gn}from"../chunk-4CCWYKQJ.js";import{b as dt}from"../chunk-KBNISIIW.js";var Wn=class extends Tr{constructor(e){super(e)}load(e,t,o,s){let h=this,l=new zr,p=new Nr(this.manager);return p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setPath(this.path),p.setWithCredentials(h.withCredentials),p.load(e,function(w){let c=h.parse(w);!c||(c.image!==void 0?l.image=c.image:c.data!==void 0&&(l.image.width=c.width,l.image.height=c.height,l.image.data=c.data),l.wrapS=c.wrapS!==void 0?c.wrapS:Xn,l.wrapT=c.wrapT!==void 0?c.wrapT:Xn,l.magFilter=c.magFilter!==void 0?c.magFilter:Ke,l.minFilter=c.minFilter!==void 0?c.minFilter:Ke,l.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(l.encoding=c.encoding),c.flipY!==void 0&&(l.flipY=c.flipY),c.format!==void 0&&(l.format=c.format),c.type!==void 0&&(l.type=c.type),c.mipmaps!==void 0&&(l.mipmaps=c.mipmaps,l.minFilter=Ur),c.mipmapCount===1&&(l.minFilter=Ke),c.generateMipmaps!==void 0&&(l.generateMipmaps=c.generateMipmaps),l.needsUpdate=!0,t&&t(l,c))},o,s),l}};var Pn={};dt(Pn,{AsyncCompress:()=>Ht,AsyncDecompress:()=>Yt,AsyncDeflate:()=>Qr,AsyncGunzip:()=>jr,AsyncGzip:()=>Ht,AsyncInflate:()=>hr,AsyncUnzipInflate:()=>ri,AsyncUnzlib:()=>nt,AsyncZipDeflate:()=>Qt,AsyncZlib:()=>Xt,Compress:()=>Vn,DecodeUTF8:()=>qt,Decompress:()=>tt,Deflate:()=>Be,EncodeUTF8:()=>$t,Gunzip:()=>Bn,Gzip:()=>Vn,Inflate:()=>Ce,Unzip:()=>ti,UnzipInflate:()=>ni,UnzipPassThrough:()=>ct,Unzlib:()=>Ln,Zip:()=>Vt,ZipDeflate:()=>Jt,ZipPassThrough:()=>En,Zlib:()=>er,compress:()=>bt,compressSync:()=>jn,decompress:()=>Wt,decompressSync:()=>Kt,deflate:()=>Vr,deflateSync:()=>An,gunzip:()=>et,gunzipSync:()=>dn,gzip:()=>bt,gzipSync:()=>jn,inflate:()=>fr,inflateSync:()=>un,strFromU8:()=>vr,strToU8:()=>Ye,unzip:()=>ii,unzipSync:()=>oi,unzlib:()=>rt,unzlibSync:()=>Xe,zip:()=>jt,zipSync:()=>ei,zlib:()=>Gt,zlibSync:()=>nr});var Mr={},qn=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Or=function(n){return new Worker(n)};try{URL.revokeObjectURL(qn(""))}catch{qn=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},Or=function(e){return new Worker(e,{type:"module"})}}var Lt=function(n,e,t,o,s){var h=Or(Mr[e]||(Mr[e]=qn(n)));return h.onerror=function(l){return s(l.error,null)},h.onmessage=function(l){return s(null,l.data)},h.postMessage(t,o),h},P=Uint8Array,ye=Uint16Array,He=Uint32Array,nn=new P([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rn=new P([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yn=new P([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dr=function(n,e){for(var t=new ye(31),o=0;o<31;++o)t[o]=e+=1<<n[o-1];for(var s=new He(t[30]),o=1;o<30;++o)for(var h=t[o];h<t[o+1];++h)s[h]=h-t[o]<<5|o;return[t,s]},Zr=Dr(nn,2),tr=Zr[0],_n=Zr[1];tr[28]=258,_n[258]=28;var _r=Dr(rn,0),kr=_r[0],$n=_r[1],Sn=new ye(32768);for($=0;$<32768;++$)Le=($&43690)>>>1|($&21845)<<1,Le=(Le&52428)>>>2|(Le&13107)<<2,Le=(Le&61680)>>>4|(Le&3855)<<4,Sn[$]=((Le&65280)>>>8|(Le&255)<<8)>>>1;var Le,$,Oe=function(n,e,t){for(var o=n.length,s=0,h=new ye(e);s<o;++s)++h[n[s]-1];var l=new ye(e);for(s=0;s<e;++s)l[s]=l[s-1]+h[s-1]<<1;var p;if(t){p=new ye(1<<e);var w=15-e;for(s=0;s<o;++s)if(n[s])for(var c=s<<4|n[s],g=e-n[s],I=l[n[s]-1]++<<g,M=I|(1<<g)-1;I<=M;++I)p[Sn[I]>>>w]=c}else for(p=new ye(o),s=0;s<o;++s)n[s]&&(p[s]=Sn[l[n[s]-1]++]>>>15-n[s]);return p},be=new P(288);for($=0;$<144;++$)be[$]=8;var $;for($=144;$<256;++$)be[$]=9;var $;for($=256;$<280;++$)be[$]=7;var $;for($=280;$<288;++$)be[$]=8;var $,je=new P(32);for($=0;$<32;++$)je[$]=5;var $,Br=Oe(be,9,0),dr=Oe(be,9,1),Lr=Oe(je,5,0),Pr=Oe(je,5,1),On=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Re=function(n,e,t){var o=e/8|0;return(n[o]|n[o+1]<<8)>>(e&7)&t},Dn=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},xn=function(n){return(n/8|0)+(n&7&&1)},De=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var o=new(n instanceof ye?ye:n instanceof He?He:P)(t-e);return o.set(n.subarray(e,t)),o},In=function(n,e,t){var o=n.length;if(!o||t&&!t.l&&o<5)return e||new P(0);var s=!e||t,h=!t||t.i;t||(t={}),e||(e=new P(o*3));var l=function(j){var Ne=e.length;if(j>Ne){var ze=new P(Math.max(Ne*2,j));ze.set(e),e=ze}},p=t.f||0,w=t.p||0,c=t.b||0,g=t.l,I=t.d,M=t.m,_=t.n,F=o*8;do{if(!g){t.f=p=Re(n,w,1);var R=Re(n,w+1,3);if(w+=3,R)if(R==1)g=dr,I=Pr,M=9,_=5;else if(R==2){var Z=Re(n,w,31)+257,b=Re(n,w+10,15)+4,J=Z+Re(n,w+5,31)+1;w+=14;for(var Y=new P(J),d=new P(19),z=0;z<b;++z)d[yn[z]]=Re(n,w+z*3,7);w+=b*3;for(var se=On(d),V=(1<<se)-1,xe=Oe(d,se,1),z=0;z<J;){var W=xe[Re(n,w,V)];w+=W&15;var O=W>>>4;if(O<16)Y[z++]=O;else{var q=0,X=0;for(O==16?(X=3+Re(n,w,3),w+=2,q=Y[z-1]):O==17?(X=3+Re(n,w,7),w+=3):O==18&&(X=11+Re(n,w,127),w+=7);X--;)Y[z++]=q}}var oe=Y.subarray(0,Z),ne=Y.subarray(Z);M=On(oe),_=On(ne),g=Oe(oe,M,1),I=Oe(ne,_,1)}else throw"invalid block type";else{var O=xn(w)+4,G=n[O-4]|n[O-3]<<8,B=O+G;if(B>o){if(h)throw"unexpected EOF";break}s&&l(c+G),e.set(n.subarray(O,B),c),t.b=c+=G,t.p=w=B*8;continue}if(w>F){if(h)throw"unexpected EOF";break}}s&&l(c+131072);for(var te=(1<<M)-1,we=(1<<_)-1,Se=w;;Se=w){var q=g[Dn(n,w)&te],le=q>>>4;if(w+=q&15,w>F){if(h)throw"unexpected EOF";break}if(!q)throw"invalid length/literal";if(le<256)e[c++]=le;else if(le==256){Se=w,g=null;break}else{var fe=le-254;if(le>264){var z=le-257,he=nn[z];fe=Re(n,w,(1<<he)-1)+tr[z],w+=he}var Ue=I[Dn(n,w)&we],ge=Ue>>>4;if(!Ue)throw"invalid distance";w+=Ue&15;var ne=kr[ge];if(ge>3){var he=rn[ge];ne+=Dn(n,w)&(1<<he)-1,w+=he}if(w>F){if(h)throw"unexpected EOF";break}s&&l(c+131072);for(var pe=c+fe;c<pe;c+=4)e[c]=e[c-ne],e[c+1]=e[c+1-ne],e[c+2]=e[c+2-ne],e[c+3]=e[c+3-ne];c=pe}}t.l=g,t.p=Se,t.b=c,g&&(p=1,t.m=M,t.d=I,t.n=_)}while(!p);return c==e.length?e:De(e,0,c)},ke=function(n,e,t){t<<=e&7;var o=e/8|0;n[o]|=t,n[o+1]|=t>>>8},Qe=function(n,e,t){t<<=e&7;var o=e/8|0;n[o]|=t,n[o+1]|=t>>>8,n[o+2]|=t>>>16},Zn=function(n,e){for(var t=[],o=0;o<n.length;++o)n[o]&&t.push({s:o,f:n[o]});var s=t.length,h=t.slice();if(!s)return[Pe,0];if(s==1){var l=new P(t[0].s+1);return l[t[0].s]=1,[l,1]}t.sort(function(J,Y){return J.f-Y.f}),t.push({s:-1,f:25001});var p=t[0],w=t[1],c=0,g=1,I=2;for(t[0]={s:-1,f:p.f+w.f,l:p,r:w};g!=s-1;)p=t[t[c].f<t[I].f?c++:I++],w=t[c!=g&&t[c].f<t[I].f?c++:I++],t[g++]={s:-1,f:p.f+w.f,l:p,r:w};for(var M=h[0].s,o=1;o<s;++o)h[o].s>M&&(M=h[o].s);var _=new ye(M+1),F=kn(t[g-1],_,0);if(F>e){var o=0,R=0,O=F-e,G=1<<O;for(h.sort(function(Y,d){return _[d.s]-_[Y.s]||Y.f-d.f});o<s;++o){var B=h[o].s;if(_[B]>e)R+=G-(1<<F-_[B]),_[B]=e;else break}for(R>>>=O;R>0;){var Z=h[o].s;_[Z]<e?R-=1<<e-_[Z]++-1:++o}for(;o>=0&&R;--o){var b=h[o].s;_[b]==e&&(--_[b],++R)}F=e}return[new P(_),F]},kn=function(n,e,t){return n.s==-1?Math.max(kn(n.l,e,t+1),kn(n.r,e,t+1)):e[n.s]=t},Jn=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ye(++e),o=0,s=n[0],h=1,l=function(w){t[o++]=w},p=1;p<=e;++p)if(n[p]==s&&p!=e)++h;else{if(!s&&h>2){for(;h>138;h-=138)l(32754);h>2&&(l(h>10?h-11<<5|28690:h-3<<5|12305),h=0)}else if(h>3){for(l(s),--h;h>6;h-=6)l(8304);h>2&&(l(h-3<<5|8208),h=0)}for(;h--;)l(s);h=1,s=n[p]}return[t.subarray(0,o),e]},Ve=function(n,e){for(var t=0,o=0;o<e.length;++o)t+=n[o]*e[o];return t},mn=function(n,e,t){var o=t.length,s=xn(e+2);n[s]=o&255,n[s+1]=o>>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var h=0;h<o;++h)n[s+h+4]=t[h];return(s+4+o)*8},Qn=function(n,e,t,o,s,h,l,p,w,c,g){ke(e,g++,t),++s[256];for(var I=Zn(s,15),M=I[0],_=I[1],F=Zn(h,15),R=F[0],O=F[1],G=Jn(M),B=G[0],Z=G[1],b=Jn(R),J=b[0],Y=b[1],d=new ye(19),z=0;z<B.length;++z)d[B[z]&31]++;for(var z=0;z<J.length;++z)d[J[z]&31]++;for(var se=Zn(d,7),V=se[0],xe=se[1],W=19;W>4&&!V[yn[W-1]];--W);var q=c+5<<3,X=Ve(s,be)+Ve(h,je)+l,oe=Ve(s,M)+Ve(h,R)+l+14+3*W+Ve(d,V)+(2*d[16]+3*d[17]+7*d[18]);if(q<=X&&q<=oe)return mn(e,g,n.subarray(w,w+c));var ne,te,we,Se;if(ke(e,g,1+(oe<X)),g+=2,oe<X){ne=Oe(M,_,0),te=M,we=Oe(R,O,0),Se=R;var le=Oe(V,xe,0);ke(e,g,Z-257),ke(e,g+5,Y-1),ke(e,g+10,W-4),g+=14;for(var z=0;z<W;++z)ke(e,g+3*z,V[yn[z]]);g+=3*W;for(var fe=[B,J],he=0;he<2;++he)for(var Ue=fe[he],z=0;z<Ue.length;++z){var ge=Ue[z]&31;ke(e,g,le[ge]),g+=V[ge],ge>15&&(ke(e,g,Ue[z]>>>5&127),g+=Ue[z]>>>12)}}else ne=Br,te=be,we=Lr,Se=je;for(var z=0;z<p;++z)if(o[z]>255){var ge=o[z]>>>18&31;Qe(e,g,ne[ge+257]),g+=te[ge+257],ge>7&&(ke(e,g,o[z]>>>23&31),g+=nn[ge]);var pe=o[z]&31;Qe(e,g,we[pe]),g+=Se[pe],pe>3&&(Qe(e,g,o[z]>>>5&8191),g+=rn[pe])}else Qe(e,g,ne[o[z]]),g+=te[o[z]];return Qe(e,g,ne[256]),g+te[256]},Hr=new He([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Pe=new P(0),br=function(n,e,t,o,s,h){var l=n.length,p=new P(o+l+5*(1+Math.ceil(l/7e3))+s),w=p.subarray(o,p.length-s),c=0;if(!e||l<8)for(var g=0;g<=l;g+=65535){var I=g+65535;I<l?c=mn(w,c,n.subarray(g,I)):(w[g]=h,c=mn(w,c,n.subarray(g,l)))}else{for(var M=Hr[e-1],_=M>>>13,F=M&8191,R=(1<<t)-1,O=new ye(32768),G=new ye(R+1),B=Math.ceil(t/3),Z=2*B,b=function($e){return(n[$e]^n[$e+1]<<B^n[$e+2]<<Z)&R},J=new He(25e3),Y=new ye(288),d=new ye(32),z=0,se=0,g=0,V=0,xe=0,W=0;g<l;++g){var q=b(g),X=g&32767,oe=G[q];if(O[X]=oe,G[q]=X,xe<=g){var ne=l-g;if((z>7e3||V>24576)&&ne>423){c=Qn(n,w,0,J,Y,d,se,V,W,g-W,c),V=z=se=0,W=g;for(var te=0;te<286;++te)Y[te]=0;for(var te=0;te<30;++te)d[te]=0}var we=2,Se=0,le=F,fe=X-oe&32767;if(ne>2&&q==b(g-fe))for(var he=Math.min(_,ne)-1,Ue=Math.min(32767,g),ge=Math.min(258,ne);fe<=Ue&&--le&&X!=oe;){if(n[g+we]==n[g+we-fe]){for(var pe=0;pe<ge&&n[g+pe]==n[g+pe-fe];++pe);if(pe>we){if(we=pe,Se=fe,pe>he)break;for(var j=Math.min(fe,pe-2),Ne=0,te=0;te<j;++te){var ze=g-fe+te+32768&32767,Hn=O[ze],Cn=ze-Hn+32768&32767;Cn>Ne&&(Ne=Cn,oe=ze)}}}X=oe,oe=O[X],fe+=X-oe+32768&32767}if(Se){J[V++]=268435456|_n[we]<<18|$n[Se];var cn=_n[we]&31,zn=$n[Se]&31;se+=nn[cn]+rn[zn],++Y[257+cn],++d[zn],xe=g+we,++z}else J[V++]=n[g],++Y[n[g]]}}c=Qn(n,w,h,J,Y,d,se,V,W,g-W,c),!h&&c&7&&(c=mn(w,c+1,Pe))}return De(p,0,o+xn(c)+s)},Xr=function(){for(var n=new He(256),e=0;e<256;++e){for(var t=e,o=9;--o;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),tn=function(){var n=-1;return{p:function(e){for(var t=n,o=0;o<e.length;++o)t=Xr[t&255^e[o]]^t>>>8;n=t},d:function(){return~n}}},ir=function(){var n=1,e=0;return{p:function(t){for(var o=n,s=e,h=t.length,l=0;l!=h;){for(var p=Math.min(l+2655,h);l<p;++l)s+=o+=t[l];o=(o&65535)+15*(o>>16),s=(s&65535)+15*(s>>16)}n=o,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},qe=function(n,e,t,o,s){return br(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,o,!s)},Un=function(n,e){var t={};for(var o in n)t[o]=n[o];for(var o in e)t[o]=e[o];return t},Fr=function(n,e,t){for(var o=n(),s=n.toString(),h=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/ /g,"").split(","),l=0;l<o.length;++l){var p=o[l],w=h[l];if(typeof p=="function"){e+=";"+w+"=";var c=p.toString();if(p.prototype)if(c.indexOf("[native code]")!=-1){var g=c.indexOf(" ",8)+1;e+=c.slice(g,c.indexOf("(",g))}else{e+=c;for(var I in p.prototype)e+=";"+w+".prototype."+I+"="+p.prototype[I].toString()}else e+=c}else t[w]=p}return[e,t]},Rn=[],Pt=function(n){var e=[];for(var t in n)(n[t]instanceof P||n[t]instanceof ye||n[t]instanceof He)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},Gr=function(n,e,t,o){var s;if(!Rn[t]){for(var h="",l={},p=n.length-1,w=0;w<p;++w)s=Fr(n[w],h,l),h=s[0],l=s[1];Rn[t]=Fr(n[p],h,l)}var c=Un({},Rn[t][1]);return Lt(Rn[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,Pt(c),o)},on=function(){return[P,ye,He,nn,rn,yn,tr,kr,dr,Pr,Sn,Oe,On,Re,Dn,xn,De,In,un,We,or]},an=function(){return[P,ye,He,nn,rn,yn,_n,$n,Br,be,Lr,je,Sn,Hr,Pe,Oe,ke,Qe,Zn,kn,Jn,Ve,mn,Qn,xn,De,br,qe,An,We]},Yr=function(){return[ar,lr,Q,tn,Xr]},Wr=function(){return[sr,$r]},Kr=function(){return[ur,Q,ir]},qr=function(){return[Jr]},We=function(n){return postMessage(n,[n.buffer])},or=function(n){return n&&n.size&&new P(n.size)},sn=function(n,e,t,o,s,h){var l=Gr(t,o,s,function(p,w){l.terminate(),h(p,w)});return l.postMessage([n,e],e.consume?[n.buffer]:[]),function(){l.terminate()}},Ze=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},ln=function(n,e,t,o,s){var h,l=Gr(n,o,s,function(p,w){p?(l.terminate(),e.ondata.call(e,p)):(w[1]&&l.terminate(),e.ondata.call(e,p,w[0],w[1]))});l.postMessage(t),e.push=function(p,w){if(h)throw"stream finished";if(!e.ondata)throw"no stream handler";l.postMessage([p,h=w],[p.buffer])},e.terminate=function(){l.terminate()}},Ie=function(n,e){return n[e]|n[e+1]<<8},ce=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},Kn=function(n,e){return ce(n,e)+ce(n,e+4)*4294967296},Q=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},ar=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&Q(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var o=0;o<=t.length;++o)n[o+10]=t.charCodeAt(o)}},sr=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var o=(e>>3&1)+(e>>4&1);o>0;o-=!n[t++]);return t+(e&2)},$r=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},lr=function(n){return 10+(n.filename&&n.filename.length+1||0)},ur=function(n,e){var t=e.level,o=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=o<<6|(o?32-2*o:1)},Jr=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function cr(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Be=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(qe(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}();var Qr=function(){function n(e,t){ln([an,function(){return[Ze,Be]}],this,cr.call(this,e,t),function(o){var s=new Be(o.data);onmessage=Ze(s)},6)}return n}();function Vr(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sn(n,e,[an],function(o){return We(An(o.data[0],o.data[1]))},0,t)}function An(n,e){return qe(n,e||{},0,0)}var Ce=function(){function n(e){this.s={},this.p=new P(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,o=new P(t+e.length);o.set(this.p),o.set(e,t),this.p=o},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,o=In(this.p,this.o,this.s);this.ondata(De(o,t,this.s.b),this.d),this.o=De(o,this.s.b-32768),this.s.b=this.o.length,this.p=De(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}();var hr=function(){function n(e){this.ondata=e,ln([on,function(){return[Ze,Ce]}],this,0,function(){var t=new Ce;onmessage=Ze(t)},7)}return n}();function fr(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sn(n,e,[on],function(o){return We(un(o.data[0],or(o.data[1])))},1,t)}function un(n,e){return In(n,e)}var Vn=function(){function n(e,t){this.c=tn(),this.l=0,this.v=1,Be.call(this,e,t)}return n.prototype.push=function(e,t){Be.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var o=qe(e,this.o,this.v&&lr(this.o),t&&8,!t);this.v&&(ar(o,this.o),this.v=0),t&&(Q(o,o.length-8,this.c.d()),Q(o,o.length-4,this.l)),this.ondata(o,t)},n}();var Ht=function(){function n(e,t){ln([an,Yr,function(){return[Ze,Be,Vn]}],this,cr.call(this,e,t),function(o){var s=new Vn(o.data);onmessage=Ze(s)},8)}return n}();function bt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sn(n,e,[an,Yr,function(){return[jn]}],function(o){return We(jn(o.data[0],o.data[1]))},2,t)}function jn(n,e){e||(e={});var t=tn(),o=n.length;t.p(n);var s=qe(n,e,lr(e),8),h=s.length;return ar(s,e),Q(s,h-8,t.d()),Q(s,h-4,o),s}var Bn=function(){function n(e){this.v=1,Ce.call(this,e)}return n.prototype.push=function(e,t){if(Ce.prototype.e.call(this,e),this.v){var o=this.p.length>3?sr(this.p):4;if(o>=this.p.length&&!t)return;this.p=this.p.subarray(o),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Ce.prototype.c.call(this,t)},n}();var jr=function(){function n(e){this.ondata=e,ln([on,Wr,function(){return[Ze,Ce,Bn]}],this,0,function(){var t=new Bn;onmessage=Ze(t)},9)}return n}();function et(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sn(n,e,[on,Wr,function(){return[dn]}],function(o){return We(dn(o.data[0]))},3,t)}function dn(n,e){return In(n.subarray(sr(n),-8),e||new P($r(n)))}var er=function(){function n(e,t){this.c=ir(),this.v=1,Be.call(this,e,t)}return n.prototype.push=function(e,t){Be.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var o=qe(e,this.o,this.v&&2,t&&4,!t);this.v&&(ur(o,this.o),this.v=0),t&&Q(o,o.length-4,this.c.d()),this.ondata(o,t)},n}();var Xt=function(){function n(e,t){ln([an,Kr,function(){return[Ze,Be,er]}],this,cr.call(this,e,t),function(o){var s=new er(o.data);onmessage=Ze(s)},10)}return n}();function Gt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sn(n,e,[an,Kr,function(){return[nr]}],function(o){return We(nr(o.data[0],o.data[1]))},4,t)}function nr(n,e){e||(e={});var t=ir();t.p(n);var o=qe(n,e,2,4);return ur(o,e),Q(o,o.length-4,t.d()),o}var Ln=function(){function n(e){this.v=1,Ce.call(this,e)}return n.prototype.push=function(e,t){if(Ce.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Ce.prototype.c.call(this,t)},n}();var nt=function(){function n(e){this.ondata=e,ln([on,qr,function(){return[Ze,Ce,Ln]}],this,0,function(){var t=new Ln;onmessage=Ze(t)},11)}return n}();function rt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return sn(n,e,[on,qr,function(){return[Xe]}],function(o){return We(Xe(o.data[0],or(o.data[1])))},5,t)}function Xe(n,e){return In((Jr(n),n.subarray(2,-4)),e)}var tt=function(){function n(e){this.G=Bn,this.I=Ce,this.Z=Ln,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var o=new P(this.p.length+e.length);o.set(this.p),o.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var s=this,h=function(){s.ondata.apply(s,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(h):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(h):new this.Z(h),this.s.push(this.p,t),this.p=null}}},n}();var Yt=function(){function n(e){this.G=jr,this.I=hr,this.Z=nt,this.ondata=e}return n.prototype.push=function(e,t){tt.prototype.push.call(this,e,t)},n}();function Wt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?et(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?fr(n,e,t):rt(n,e,t)}function Kt(n,e){return n[0]==31&&n[1]==139&&n[2]==8?dn(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?un(n,e):Xe(n,e)}var pr=function(n,e,t,o){for(var s in n){var h=n[s],l=e+s;h instanceof P?t[l]=[h,o]:Array.isArray(h)?t[l]=[h[0],Un(o,h[1])]:pr(h,l+"/",t,o)}},Rr=typeof TextEncoder<"u"&&new TextEncoder,rr=typeof TextDecoder<"u"&&new TextDecoder,it=0;try{rr.decode(Pe,{stream:!0}),it=1}catch{}var ot=function(n){for(var e="",t=0;;){var o=n[t++],s=(o>127)+(o>223)+(o>239);if(t+s>n.length)return[e,De(n,t-1)];s?s==3?(o=((o&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|o>>10,56320|o&1023)):s&1?e+=String.fromCharCode((o&31)<<6|n[t++]&63):e+=String.fromCharCode((o&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(o)}},qt=function(){function n(e){this.ondata=e,it?this.t=new TextDecoder:this.p=Pe}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var o=new P(this.p.length+e.length);o.set(this.p),o.set(e,this.p.length);var s=ot(o),h=s[0],l=s[1];if(t){if(l.length)throw"invalid utf-8 data";this.p=null}else this.p=l;this.ondata(h,t)},n}();var $t=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Ye(e),this.d=t||!1)},n}();function Ye(n,e){if(e){for(var t=new P(n.length),o=0;o<n.length;++o)t[o]=n.charCodeAt(o);return t}if(Rr)return Rr.encode(n);for(var s=n.length,h=new P(n.length+(n.length>>1)),l=0,p=function(g){h[l++]=g},o=0;o<s;++o){if(l+5>h.length){var w=new P(l+8+(s-o<<1));w.set(h),h=w}var c=n.charCodeAt(o);c<128||e?p(c):c<2048?(p(192|c>>6),p(128|c&63)):c>55295&&c<57344?(c=65536+(c&1023<<10)|n.charCodeAt(++o)&1023,p(240|c>>18),p(128|c>>12&63),p(128|c>>6&63),p(128|c&63)):(p(224|c>>12),p(128|c>>6&63),p(128|c&63))}return De(h,0,l)}function vr(n,e){if(e){for(var t="",o=0;o<n.length;o+=16384)t+=String.fromCharCode.apply(null,n.subarray(o,o+16384));return t}else{if(rr)return rr.decode(n);var s=ot(n),h=s[0],l=s[1];if(l.length)throw"invalid utf-8 data";return h}}var at=function(n){return n==1?3:n<6?2:n==9?1:0},st=function(n,e){return e+30+Ie(n,e+26)+Ie(n,e+28)},lt=function(n,e,t){var o=Ie(n,e+28),s=vr(n.subarray(e+46,e+46+o),!(Ie(n,e+8)&2048)),h=e+46+o,l=ce(n,e+20),p=t&&l==4294967295?ut(n,h):[l,ce(n,e+24),ce(n,e+42)],w=p[0],c=p[1],g=p[2];return[Ie(n,e+10),w,c,s,h+Ie(n,e+30)+Ie(n,e+32),g]},ut=function(n,e){for(;Ie(n,e)!=1;e+=4+Ie(n,e+2));return[Kn(n,e+12),Kn(n,e+4),Kn(n,e+20)]},Ge=function(n){var e=0;if(n)for(var t in n){var o=n[t].length;if(o>65535)throw"extra field too long";e+=o+4}return e},en=function(n,e,t,o,s,h,l,p){var w=o.length,c=t.extra,g=p&&p.length,I=Ge(c);Q(n,e,l!=null?33639248:67324752),e+=4,l!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(h==null&&8),n[e++]=s&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var M=new Date(t.mtime==null?Date.now():t.mtime),_=M.getFullYear()-1980;if(_<0||_>119)throw"date not in range 1980-2099";if(Q(n,e,_<<25|M.getMonth()+1<<21|M.getDate()<<16|M.getHours()<<11|M.getMinutes()<<5|M.getSeconds()>>>1),e+=4,h!=null&&(Q(n,e,t.crc),Q(n,e+4,h),Q(n,e+8,t.size)),Q(n,e+12,w),Q(n,e+14,I),e+=16,l!=null&&(Q(n,e,g),Q(n,e+6,t.attrs),Q(n,e+10,l),e+=14),n.set(o,e),e+=w,I)for(var F in c){var R=c[F],O=R.length;Q(n,e,+F),Q(n,e+2,O),n.set(R,e+4),e+=4+O}return g&&(n.set(p,e),e+=g),e},wr=function(n,e,t,o,s){Q(n,e,101010256),Q(n,e+8,t),Q(n,e+10,t),Q(n,e+12,o),Q(n,e+16,s)},En=function(){function n(e){this.filename=e,this.c=tn(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}();var Jt=function(){function n(e,t){var o=this;t||(t={}),En.call(this,e),this.d=new Be(t,function(s,h){o.ondata(null,s,h)}),this.compression=8,this.flag=at(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(o){this.ondata(o,null,t)}},n.prototype.push=function(e,t){En.prototype.push.call(this,e,t)},n}();var Qt=function(){function n(e,t){var o=this;t||(t={}),En.call(this,e),this.d=new Qr(t,function(s,h,l){o.ondata(s,h,l)}),this.compression=8,this.flag=at(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){En.prototype.push.call(this,e,t)},n}();var Vt=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var o=Ye(e.filename),s=o.length,h=e.comment,l=h&&Ye(h),p=s!=e.filename.length||l&&h.length!=l.length,w=s+Ge(e.extra)+30;if(s>65535)throw"filename too long";var c=new P(w);en(c,0,e,o,p);var g=[c],I=function(){for(var O=0,G=g;O<G.length;O++){var B=G[O];t.ondata(null,B,!1)}g=[]},M=this.d;this.d=0;var _=this.u.length,F=Un(e,{f:o,u:p,o:l,t:function(){e.terminate&&e.terminate()},r:function(){if(I(),M){var O=t.u[_+1];O?O.r():t.d=1}M=1}}),R=0;e.ondata=function(O,G,B){if(O)t.ondata(O,G,B),t.terminate();else if(R+=G.length,g.push(G),B){var Z=new P(16);Q(Z,0,134695760),Q(Z,4,e.crc),Q(Z,8,R),Q(Z,12,e.size),g.push(Z),F.c=R,F.b=w+R+16,F.crc=e.crc,F.size=e.size,M&&F.r(),M=1}else M&&I()},this.u.push(F)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(e.d&1)||(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,o=0,s=0,h=this.u;s<h.length;s++){var l=h[s];o+=46+l.f.length+Ge(l.extra)+(l.o?l.o.length:0)}for(var p=new P(o+22),w=0,c=this.u;w<c.length;w++){var l=c[w];en(p,e,l,l.f,l.u,l.c,t,l.o),e+=46+l.f.length+Ge(l.extra)+(l.o?l.o.length:0),t+=l.b}wr(p,e,this.u.length,o,t),this.ondata(null,p,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var o=t[e];o.t()}this.d=2},n}();function jt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var o={};pr(n,"",o,e);var s=Object.keys(o),h=s.length,l=0,p=0,w=h,c=new Array(h),g=[],I=function(){for(var R=0;R<g.length;++R)g[R]()},M=function(){var R=new P(p+22),O=l,G=p-l;p=0;for(var B=0;B<w;++B){var Z=c[B];try{var b=Z.c.length;en(R,p,Z,Z.f,Z.u,b);var J=30+Z.f.length+Ge(Z.extra),Y=p+J;R.set(Z.c,Y),en(R,l,Z,Z.f,Z.u,b,p,Z.m),l+=16+J+(Z.m?Z.m.length:0),p=Y+b}catch(d){return t(d,null)}}wr(R,l,c.length,G,O),t(null,R)};h||M();for(var _=function(R){var O=s[R],G=o[O],B=G[0],Z=G[1],b=tn(),J=B.length;b.p(B);var Y=Ye(O),d=Y.length,z=Z.comment,se=z&&Ye(z),V=se&&se.length,xe=Ge(Z.extra),W=Z.level==0?0:8,q=function(X,oe){if(X)I(),t(X,null);else{var ne=oe.length;c[R]=Un(Z,{size:J,crc:b.d(),c:oe,f:Y,m:se,u:d!=O.length||se&&z.length!=V,compression:W}),l+=30+d+xe+ne,p+=76+2*(d+xe)+(V||0)+ne,--h||M()}};if(d>65535&&q("filename too long",null),!W)q(null,B);else if(J<16e4)try{q(null,An(B,Z))}catch(X){q(X,null)}else g.push(Vr(B,Z,q))},F=0;F<w;++F)_(F);return I}function ei(n,e){e||(e={});var t={},o=[];pr(n,"",t,e);var s=0,h=0;for(var l in t){var p=t[l],w=p[0],c=p[1],g=c.level==0?0:8,I=Ye(l),M=I.length,_=c.comment,F=_&&Ye(_),R=F&&F.length,O=Ge(c.extra);if(M>65535)throw"filename too long";var G=g?An(w,c):w,B=G.length,Z=tn();Z.p(w),o.push(Un(c,{size:w.length,crc:Z.d(),c:G,f:I,m:F,u:M!=l.length||F&&_.length!=R,o:s,compression:g})),s+=30+M+O+B,h+=76+2*(M+O)+(R||0)+B}for(var b=new P(h+22),J=s,Y=h-s,d=0;d<o.length;++d){var I=o[d];en(b,I.o,I,I.f,I.u,I.c.length);var z=30+I.f.length+Ge(I.extra);b.set(I.c,I.o+z),en(b,s,I,I.f,I.u,I.c.length,I.o,I.m),s+=16+z+(I.m?I.m.length:0)}return wr(b,s,o.length,Y,J),b}var ct=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}();var ni=function(){function n(){var e=this;this.i=new Ce(function(t,o){e.ondata(null,t,o)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(o){this.ondata(o,e,t)}},n.compression=8,n}();var ri=function(){function n(e,t){var o=this;t<32e4?this.i=new Ce(function(s,h){o.ondata(null,s,h)}):(this.i=new hr(function(s,h,l){o.ondata(s,h,l)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=De(e,0)),this.i.push(e,t)},n.compression=8,n}();var ti=function(){function n(e){this.onfile=e,this.k=[],this.o={0:ct},this.p=Pe}return n.prototype.push=function(e,t){var o=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var s=Math.min(this.c,e.length),h=e.subarray(0,s);if(this.c-=s,this.d?this.d.push(h,!this.c):this.k[0].push(h),e=e.subarray(s),e.length)return this.push(e,t)}else{var l=0,p=0,w=void 0,c=void 0;this.p.length?e.length?(c=new P(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var g=c.length,I=this.c,M=I&&this.d,_=function(){var G,B=ce(c,p);if(B==67324752){l=1,w=p,F.d=null,F.c=0;var Z=Ie(c,p+6),b=Ie(c,p+8),J=Z&2048,Y=Z&8,d=Ie(c,p+26),z=Ie(c,p+28);if(g>p+30+d+z){var se=[];F.k.unshift(se),l=2;var V=ce(c,p+18),xe=ce(c,p+22),W=vr(c.subarray(p+30,p+=30+d),!J);V==4294967295?(G=Y?[-2]:ut(c,p),V=G[0],xe=G[1]):Y&&(V=-1),p+=z,F.c=V;var q,X={name:W,compression:b,start:function(){if(!X.ondata)throw"no callback";if(!V)X.ondata(null,Pe,!0);else{var oe=o.o[b];if(!oe)throw"unknown compression type "+b;q=V<0?new oe(W):new oe(W,V,xe),q.ondata=function(Se,le,fe){X.ondata(Se,le,fe)};for(var ne=0,te=se;ne<te.length;ne++){var we=te[ne];q.push(we,!1)}o.k[0]==se&&o.c?o.d=q:q.push(Pe,!0)}},terminate:function(){q&&q.terminate&&q.terminate()}};V>=0&&(X.size=V,X.originalSize=xe),F.onfile(X)}return"break"}else if(I){if(B==134695760)return w=p+=12+(I==-2&&8),l=3,F.c=0,"break";if(B==33639248)return w=p-=4,l=3,F.c=0,"break"}},F=this;p<g-4;++p){var R=_();if(R==="break")break}if(this.p=Pe,I<0){var O=l?c.subarray(0,w-12-(I==-2&&8)-(ce(c,w-16)==134695760&&4)):c.subarray(0,p);M?M.push(O,!!l):this.k[+(l==2)].push(O)}if(l&2)return this.push(c.subarray(p),t);this.p=c.subarray(p)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function ii(n,e){if(typeof e!="function")throw"no callback";for(var t=[],o=function(){for(var M=0;M<t.length;++M)t[M]()},s={},h=n.length-22;ce(n,h)!=101010256;--h)if(!h||n.length-h>65558){e("invalid zip file",null);return}var l=Ie(n,h+8);l||e(null,{});var p=l,w=ce(n,h+16),c=w==4294967295;if(c){if(h=ce(n,h-12),ce(n,h)!=101075792){e("invalid zip file",null);return}p=l=ce(n,h+32),w=ce(n,h+48)}for(var g=function(M){var _=lt(n,w,c),F=_[0],R=_[1],O=_[2],G=_[3],B=_[4],Z=_[5],b=st(n,Z);w=B;var J=function(d,z){d?(o(),e(d,null)):(s[G]=z,--l||e(null,s))};if(!F)J(null,De(n,b,b+R));else if(F==8){var Y=n.subarray(b,b+R);if(R<32e4)try{J(null,un(Y,new P(O)))}catch(d){J(d,null)}else t.push(fr(Y,{size:O},J))}else J("unknown compression type "+F,null)},I=0;I<p;++I)g(I);return o}function oi(n){for(var e={},t=n.length-22;ce(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var o=Ie(n,t+8);if(!o)return{};var s=ce(n,t+16),h=s==4294967295;if(h){if(t=ce(n,t-12),ce(n,t)!=101075792)throw"invalid zip file";o=ce(n,t+32),s=ce(n,t+48)}for(var l=0;l<o;++l){var p=lt(n,s,h),w=p[0],c=p[1],g=p[2],I=p[3],M=p[4],_=p[5],F=st(n,_);if(s=M,!w)e[I]=De(n,F,F+c);else if(w==8)e[I]=un(n.subarray(F,F+c),new P(g));else throw"unknown compression type "+w}return e}var gr=class extends Wn{constructor(e){super(e);this.type=gn}parse(e){let se=Math.pow(2.7182818,2.2);function V(r,i){let a=0;for(let v=0;v<65536;++v)(v==0||r[v>>3]&1<<(v&7))&&(i[a++]=v);let u=a-1;for(;a<65536;)i[a++]=0;return u}function xe(r){for(let i=0;i<16384;i++)r[i]={},r[i].len=0,r[i].lit=0,r[i].p=null}let W={l:0,c:0,lc:0};function q(r,i,a,u,v){for(;a<r;)i=i<<8|xr(u,v),a+=8;a-=r,W.l=i>>a&(1<<r)-1,W.c=i,W.lc=a}let X=new Array(59);function oe(r){for(let a=0;a<=58;++a)X[a]=0;for(let a=0;a<65537;++a)X[r[a]]+=1;let i=0;for(let a=58;a>0;--a){let u=i+X[a]>>1;X[a]=i,i=u}for(let a=0;a<65537;++a){let u=r[a];u>0&&(r[a]=u|X[u]++<<6)}}function ne(r,i,a,u,v,f){let y=i,E=0,x=0;for(;u<=v;u++){if(y.value-i.value>a)return!1;q(6,E,x,r,y);let m=W.l;if(E=W.c,x=W.lc,f[u]=m,m==63){if(y.value-i.value>a)throw new Error("Something wrong with hufUnpackEncTable");q(8,E,x,r,y);let S=W.l+6;if(E=W.c,x=W.lc,u+S>v+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)f[u++]=0;u--}else if(m>=59){let S=m-59+2;if(u+S>v+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)f[u++]=0;u--}}oe(f)}function te(r){return r&63}function we(r){return r>>6}function Se(r,i,a,u){for(;i<=a;i++){let v=we(r[i]),f=te(r[i]);if(v>>f)throw new Error("Invalid table entry");if(f>14){let y=u[v>>f-14];if(y.len)throw new Error("Invalid table entry");if(y.lit++,y.p){let E=y.p;y.p=new Array(y.lit);for(let x=0;x<y.lit-1;++x)y.p[x]=E[x]}else y.p=new Array(1);y.p[y.lit-1]=i}else if(f){let y=0;for(let E=1<<14-f;E>0;E--){let x=u[(v<<14-f)+y];if(x.len||x.p)throw new Error("Invalid table entry");x.len=f,x.lit=i,y++}}}return!0}let le={c:0,lc:0};function fe(r,i,a,u){r=r<<8|xr(a,u),i+=8,le.c=r,le.lc=i}let he={c:0,lc:0};function Ue(r,i,a,u,v,f,y,E,x){if(r==i){u<8&&(fe(a,u,v,f),a=le.c,u=le.lc),u-=8;let m=a>>u;if(m=new Uint8Array([m])[0],E.value+m>x)return!1;let S=y[E.value-1];for(;m-- >0;)y[E.value++]=S}else if(E.value<x)y[E.value++]=r;else return!1;he.c=a,he.lc=u}function ge(r){return r&65535}function pe(r){let i=ge(r);return i>32767?i-65536:i}let j={a:0,b:0};function Ne(r,i){let a=pe(r),v=pe(i),f=a+(v&1)+(v>>1),y=f,E=f-v;j.a=y,j.b=E}function ze(r,i){let a=ge(r),u=ge(i),v=a-(u>>1)&65535,f=u+v-32768&65535;j.a=f,j.b=v}function Hn(r,i,a,u,v,f,y){let E=y<16384,x=a>v?v:a,m=1,S,A;for(;m<=x;)m<<=1;for(m>>=1,S=m,m>>=1;m>=1;){A=0;let C=A+f*(v-S),D=f*m,k=f*S,T=u*m,N=u*S,L,ae,ue,Te;for(;A<=C;A+=k){let ie=A,K=A+u*(a-S);for(;ie<=K;ie+=N){let ve=ie+T,Fe=ie+D,me=Fe+T;E?(Ne(r[ie+i],r[Fe+i]),L=j.a,ue=j.b,Ne(r[ve+i],r[me+i]),ae=j.a,Te=j.b,Ne(L,ae),r[ie+i]=j.a,r[ve+i]=j.b,Ne(ue,Te),r[Fe+i]=j.a,r[me+i]=j.b):(ze(r[ie+i],r[Fe+i]),L=j.a,ue=j.b,ze(r[ve+i],r[me+i]),ae=j.a,Te=j.b,ze(L,ae),r[ie+i]=j.a,r[ve+i]=j.b,ze(ue,Te),r[Fe+i]=j.a,r[me+i]=j.b)}if(a&m){let ve=ie+D;E?Ne(r[ie+i],r[ve+i]):ze(r[ie+i],r[ve+i]),L=j.a,r[ve+i]=j.b,r[ie+i]=L}}if(v&m){let ie=A,K=A+u*(a-S);for(;ie<=K;ie+=N){let ve=ie+T;E?Ne(r[ie+i],r[ve+i]):ze(r[ie+i],r[ve+i]),L=j.a,r[ve+i]=j.b,r[ie+i]=L}}S=m,m>>=1}return A}function Cn(r,i,a,u,v,f,y,E,x){let m=0,S=0,A=y,C=Math.trunc(u.value+(v+7)/8);for(;u.value<C;)for(fe(m,S,a,u),m=le.c,S=le.lc;S>=14;){let k=m>>S-14&16383,T=i[k];if(T.len)S-=T.len,Ue(T.lit,f,m,S,a,u,E,x,A),m=he.c,S=he.lc;else{if(!T.p)throw new Error("hufDecode issues");let N;for(N=0;N<T.lit;N++){let L=te(r[T.p[N]]);for(;S<L&&u.value<C;)fe(m,S,a,u),m=le.c,S=le.lc;if(S>=L&&we(r[T.p[N]])==(m>>S-L&(1<<L)-1)){S-=L,Ue(T.p[N],f,m,S,a,u,E,x,A),m=he.c,S=he.lc;break}}if(N==T.lit)throw new Error("hufDecode issues")}}let D=8-v&7;for(m>>=D,S-=D;S>0;){let k=i[m<<14-S&16383];if(k.len)S-=k.len,Ue(k.lit,f,m,S,a,u,E,x,A),m=he.c,S=he.lc;else throw new Error("hufDecode issues")}return!0}function cn(r,i,a,u,v,f){let y={value:0},E=a.value,x=Ae(i,a),m=Ae(i,a);a.value+=4;let S=Ae(i,a);if(a.value+=4,x<0||x>=65537||m<0||m>=65537)throw new Error("Something wrong with HUF_ENCSIZE");let A=new Array(65537),C=new Array(16384);xe(C);let D=u-(a.value-E);if(ne(r,a,D,x,m,A),S>8*(u-(a.value-E)))throw new Error("Something wrong with hufUncompress");Se(A,x,m,C),Cn(A,C,r,a,S,m,f,v,y)}function zn(r,i,a){for(let u=0;u<a;++u)i[u]=r[i[u]]}function mr(r){for(let i=1;i<r.length;i++){let a=r[i-1]+r[i]-128;r[i]=a}}function $e(r,i){let a=0,u=Math.floor((r.length+1)/2),v=0,f=r.length-1;for(;!(v>f||(i[v++]=r[a++],v>f));)i[v++]=r[u++]}function yr(r){let i=r.byteLength,a=new Array,u=0,v=new DataView(r);for(;i>0;){let f=v.getInt8(u++);if(f<0){let y=-f;i-=y+1;for(let E=0;E<y;E++)a.push(v.getUint8(u++))}else{let y=f;i-=2;let E=v.getUint8(u++);for(let x=0;x<y+1;x++)a.push(E)}}return a}function ht(r,i,a,u,v,f){let y=new DataView(f.buffer),E=a[r.idx[0]].width,x=a[r.idx[0]].height,m=3,S=Math.floor(E/8),A=Math.ceil(E/8),C=Math.ceil(x/8),D=E-(A-1)*8,k=x-(C-1)*8,T={value:0},N=new Array(m),L=new Array(m),ae=new Array(m),ue=new Array(m),Te=new Array(m);for(let K=0;K<m;++K)Te[K]=i[r.idx[K]],N[K]=K<1?0:N[K-1]+A*C,L[K]=new Float32Array(64),ae[K]=new Uint16Array(64),ue[K]=new Uint16Array(A*64);for(let K=0;K<C;++K){let ve=8;K==C-1&&(ve=k);let Fe=8;for(let ee=0;ee<A;++ee){ee==A-1&&(Fe=D);for(let re=0;re<m;++re)ae[re].fill(0),ae[re][0]=v[N[re]++],ft(T,u,ae[re]),pt(ae[re],L[re]),vt(L[re]);m==3&&wt(L);for(let re=0;re<m;++re)gt(L[re],ue[re],ee*64)}let me=0;for(let ee=0;ee<m;++ee){let re=a[r.idx[ee]].type;for(let de=8*K;de<8*K+ve;++de){me=Te[ee][de];for(let wn=0;wn<S;++wn){let _e=wn*64+(de&7)*8;y.setUint16(me+0*2*re,ue[ee][_e+0],!0),y.setUint16(me+1*2*re,ue[ee][_e+1],!0),y.setUint16(me+2*2*re,ue[ee][_e+2],!0),y.setUint16(me+3*2*re,ue[ee][_e+3],!0),y.setUint16(me+4*2*re,ue[ee][_e+4],!0),y.setUint16(me+5*2*re,ue[ee][_e+5],!0),y.setUint16(me+6*2*re,ue[ee][_e+6],!0),y.setUint16(me+7*2*re,ue[ee][_e+7],!0),me+=8*2*re}}if(S!=A)for(let de=8*K;de<8*K+ve;++de){let wn=Te[ee][de]+8*S*2*re,_e=S*64+(de&7)*8;for(let Mn=0;Mn<Fe;++Mn)y.setUint16(wn+Mn*2*re,ue[ee][_e+Mn],!0)}}}let ie=new Uint16Array(E);y=new DataView(f.buffer);for(let K=0;K<m;++K){a[r.idx[K]].decoded=!0;let ve=a[r.idx[K]].type;if(a[K].type==2)for(let Fe=0;Fe<x;++Fe){let me=Te[K][Fe];for(let ee=0;ee<E;++ee)ie[ee]=y.getUint16(me+ee*2*ve,!0);for(let ee=0;ee<E;++ee)y.setFloat32(me+ee*2*ve,U(ie[ee]),!0)}}}function ft(r,i,a){let u,v=1;for(;v<64;)u=i[r.value],u==65280?v=64:u>>8==255?v+=u&255:(a[v]=u,v++),r.value++}function pt(r,i){i[0]=U(r[0]),i[1]=U(r[1]),i[2]=U(r[5]),i[3]=U(r[6]),i[4]=U(r[14]),i[5]=U(r[15]),i[6]=U(r[27]),i[7]=U(r[28]),i[8]=U(r[2]),i[9]=U(r[4]),i[10]=U(r[7]),i[11]=U(r[13]),i[12]=U(r[16]),i[13]=U(r[26]),i[14]=U(r[29]),i[15]=U(r[42]),i[16]=U(r[3]),i[17]=U(r[8]),i[18]=U(r[12]),i[19]=U(r[17]),i[20]=U(r[25]),i[21]=U(r[30]),i[22]=U(r[41]),i[23]=U(r[43]),i[24]=U(r[9]),i[25]=U(r[11]),i[26]=U(r[18]),i[27]=U(r[24]),i[28]=U(r[31]),i[29]=U(r[40]),i[30]=U(r[44]),i[31]=U(r[53]),i[32]=U(r[10]),i[33]=U(r[19]),i[34]=U(r[23]),i[35]=U(r[32]),i[36]=U(r[39]),i[37]=U(r[45]),i[38]=U(r[52]),i[39]=U(r[54]),i[40]=U(r[20]),i[41]=U(r[22]),i[42]=U(r[33]),i[43]=U(r[38]),i[44]=U(r[46]),i[45]=U(r[51]),i[46]=U(r[55]),i[47]=U(r[60]),i[48]=U(r[21]),i[49]=U(r[34]),i[50]=U(r[37]),i[51]=U(r[47]),i[52]=U(r[50]),i[53]=U(r[56]),i[54]=U(r[59]),i[55]=U(r[61]),i[56]=U(r[35]),i[57]=U(r[36]),i[58]=U(r[48]),i[59]=U(r[49]),i[60]=U(r[57]),i[61]=U(r[58]),i[62]=U(r[62]),i[63]=U(r[63])}function vt(r){let i=.5*Math.cos(.7853975),a=.5*Math.cos(3.14159/16),u=.5*Math.cos(3.14159/8),v=.5*Math.cos(3*3.14159/16),f=.5*Math.cos(5*3.14159/16),y=.5*Math.cos(3*3.14159/8),E=.5*Math.cos(7*3.14159/16),x=new Array(4),m=new Array(4),S=new Array(4),A=new Array(4);for(let C=0;C<8;++C){let D=C*8;x[0]=u*r[D+2],x[1]=y*r[D+2],x[2]=u*r[D+6],x[3]=y*r[D+6],m[0]=a*r[D+1]+v*r[D+3]+f*r[D+5]+E*r[D+7],m[1]=v*r[D+1]-E*r[D+3]-a*r[D+5]-f*r[D+7],m[2]=f*r[D+1]-a*r[D+3]+E*r[D+5]+v*r[D+7],m[3]=E*r[D+1]-f*r[D+3]+v*r[D+5]-a*r[D+7],S[0]=i*(r[D+0]+r[D+4]),S[3]=i*(r[D+0]-r[D+4]),S[1]=x[0]+x[3],S[2]=x[1]-x[2],A[0]=S[0]+S[1],A[1]=S[3]+S[2],A[2]=S[3]-S[2],A[3]=S[0]-S[1],r[D+0]=A[0]+m[0],r[D+1]=A[1]+m[1],r[D+2]=A[2]+m[2],r[D+3]=A[3]+m[3],r[D+4]=A[3]-m[3],r[D+5]=A[2]-m[2],r[D+6]=A[1]-m[1],r[D+7]=A[0]-m[0]}for(let C=0;C<8;++C)x[0]=u*r[16+C],x[1]=y*r[16+C],x[2]=u*r[48+C],x[3]=y*r[48+C],m[0]=a*r[8+C]+v*r[24+C]+f*r[40+C]+E*r[56+C],m[1]=v*r[8+C]-E*r[24+C]-a*r[40+C]-f*r[56+C],m[2]=f*r[8+C]-a*r[24+C]+E*r[40+C]+v*r[56+C],m[3]=E*r[8+C]-f*r[24+C]+v*r[40+C]-a*r[56+C],S[0]=i*(r[C]+r[32+C]),S[3]=i*(r[C]-r[32+C]),S[1]=x[0]+x[3],S[2]=x[1]-x[2],A[0]=S[0]+S[1],A[1]=S[3]+S[2],A[2]=S[3]-S[2],A[3]=S[0]-S[1],r[0+C]=A[0]+m[0],r[8+C]=A[1]+m[1],r[16+C]=A[2]+m[2],r[24+C]=A[3]+m[3],r[32+C]=A[3]-m[3],r[40+C]=A[2]-m[2],r[48+C]=A[1]-m[1],r[56+C]=A[0]-m[0]}function wt(r){for(let i=0;i<64;++i){let a=r[0][i],u=r[1][i],v=r[2][i];r[0][i]=a+1.5747*v,r[1][i]=a-.1873*u-.4682*v,r[2][i]=a+1.8556*u}}function gt(r,i,a){for(let u=0;u<64;++u)i[a+u]=Yn.toHalfFloat(mt(r[u]))}function mt(r){return r<=1?Math.sign(r)*Math.pow(Math.abs(r),2.2):Math.sign(r)*Math.pow(se,Math.abs(r)-1)}function Sr(r){return new DataView(r.array.buffer,r.offset.value,r.size)}function yt(r){let i=r.viewer.buffer.slice(r.offset.value,r.offset.value+r.size),a=new Uint8Array(yr(i)),u=new Uint8Array(a.length);return mr(a),$e(a,u),new DataView(u.buffer)}function bn(r){let i=r.array.slice(r.offset.value,r.offset.value+r.size);typeof Pn>"u"&&console.error("THREE.EXRLoader: External library fflate.min.js required.");let a=Xe(i),u=new Uint8Array(a.length);return mr(a),$e(a,u),new DataView(u.buffer)}function St(r){let i=r.viewer,a={value:r.offset.value},u=new Uint16Array(r.width*r.scanlineBlockSize*(r.channels*r.type)),v=new Uint8Array(8192),f=0,y=new Array(r.channels);for(let k=0;k<r.channels;k++)y[k]={},y[k].start=f,y[k].end=y[k].start,y[k].nx=r.width,y[k].ny=r.lines,y[k].size=r.type,f+=y[k].nx*y[k].ny*y[k].size;let E=fn(i,a),x=fn(i,a);if(x>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(E<=x)for(let k=0;k<x-E+1;k++)v[k+E]=Je(i,a);let m=new Uint16Array(65536),S=V(v,m),A=Ae(i,a);cn(r.array,i,a,A,u,f);for(let k=0;k<r.channels;++k){let T=y[k];for(let N=0;N<y[k].size;++N)Hn(u,T.start+N,T.nx,T.size,T.ny,T.nx*T.size,S)}zn(m,u,f);let C=0,D=new Uint8Array(u.buffer.byteLength);for(let k=0;k<r.lines;k++)for(let T=0;T<r.channels;T++){let N=y[T],L=N.nx*N.size,ae=new Uint8Array(u.buffer,N.end*2,L*2);D.set(ae,C),C+=L*2,N.end+=L}return new DataView(D.buffer)}function Et(r){let i=r.array.slice(r.offset.value,r.offset.value+r.size);typeof Pn>"u"&&console.error("THREE.EXRLoader: External library fflate.min.js required.");let a=Xe(i),u=r.lines*r.channels*r.width,v=r.type==1?new Uint16Array(u):new Uint32Array(u),f=0,y=0,E=new Array(4);for(let x=0;x<r.lines;x++)for(let m=0;m<r.channels;m++){let S=0;switch(r.type){case 1:E[0]=f,E[1]=E[0]+r.width,f=E[1]+r.width;for(let A=0;A<r.width;++A)S+=a[E[0]++]<<8|a[E[1]++],v[y]=S,y++;break;case 2:E[0]=f,E[1]=E[0]+r.width,E[2]=E[1]+r.width,f=E[2]+r.width;for(let A=0;A<r.width;++A)S+=a[E[0]++]<<24|a[E[1]++]<<16|a[E[2]++]<<8,v[y]=S,y++;break}}return new DataView(v.buffer)}function Er(r){let i=r.viewer,a={value:r.offset.value},u=new Uint8Array(r.width*r.lines*(r.channels*r.type*2)),v={version:Me(i,a),unknownUncompressedSize:Me(i,a),unknownCompressedSize:Me(i,a),acCompressedSize:Me(i,a),dcCompressedSize:Me(i,a),rleCompressedSize:Me(i,a),rleUncompressedSize:Me(i,a),rleRawSize:Me(i,a),totalAcUncompressedCount:Me(i,a),totalDcUncompressedCount:Me(i,a),acCompression:Me(i,a)};if(v.version<2)throw new Error("EXRLoader.parse: "+vn.compression+" version "+v.version+" is unsupported");let f=new Array,y=fn(i,a)-2;for(;y>0;){let T=Tn(i.buffer,a),N=Je(i,a),L=N>>2&3,ae=(N>>4)-1,ue=new Int8Array([ae])[0],Te=Je(i,a);f.push({name:T,index:ue,type:Te,compression:L}),y-=T.length+3}let E=vn.channels,x=new Array(r.channels);for(let T=0;T<r.channels;++T){let N=x[T]={},L=E[T];N.name=L.name,N.compression=0,N.decoded=!1,N.type=L.pixelType,N.pLinear=L.pLinear,N.width=r.width,N.height=r.lines}let m={idx:new Array(3)};for(let T=0;T<r.channels;++T){let N=x[T];for(let L=0;L<f.length;++L){let ae=f[L];N.name==ae.name&&(N.compression=ae.compression,ae.index>=0&&(m.idx[ae.index]=T),N.offset=T)}}let S,A,C;if(v.acCompressedSize>0)switch(v.acCompression){case 0:S=new Uint16Array(v.totalAcUncompressedCount),cn(r.array,i,a,v.acCompressedSize,S,v.totalAcUncompressedCount);break;case 1:let T=r.array.slice(a.value,a.value+v.totalAcUncompressedCount),N=Xe(T);S=new Uint16Array(N.buffer),a.value+=v.totalAcUncompressedCount;break}if(v.dcCompressedSize>0){let T={array:r.array,offset:a,size:v.dcCompressedSize};A=new Uint16Array(bn(T).buffer),a.value+=v.dcCompressedSize}if(v.rleRawSize>0){let T=r.array.slice(a.value,a.value+v.rleCompressedSize),N=Xe(T);C=yr(N.buffer),a.value+=v.rleCompressedSize}let D=0,k=new Array(x.length);for(let T=0;T<k.length;++T)k[T]=new Array;for(let T=0;T<r.lines;++T)for(let N=0;N<x.length;++N)k[N].push(D),D+=x[N].width*r.type*2;ht(m,k,x,S,A,u);for(let T=0;T<x.length;++T){let N=x[T];if(!N.decoded)switch(N.compression){case 2:let L=0,ae=0;for(let ue=0;ue<r.lines;++ue){let Te=k[T][L];for(let ie=0;ie<N.width;++ie){for(let K=0;K<2*N.type;++K)u[Te++]=C[ae+K*N.width*N.height];ae++}L++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(u.buffer)}function Tn(r,i){let a=new Uint8Array(r),u=0;for(;a[i.value+u]!=0;)u+=1;let v=new TextDecoder().decode(a.slice(i.value,i.value+u));return i.value=i.value+u+1,v}function xt(r,i,a){let u=new TextDecoder().decode(new Uint8Array(r).slice(i.value,i.value+a));return i.value=i.value+a,u}function It(r,i){let a=hn(r,i),u=Ae(r,i);return[a,u]}function Ut(r,i){let a=Ae(r,i),u=Ae(r,i);return[a,u]}function hn(r,i){let a=r.getInt32(i.value,!0);return i.value=i.value+4,a}function Ae(r,i){let a=r.getUint32(i.value,!0);return i.value=i.value+4,a}function xr(r,i){let a=r[i.value];return i.value=i.value+1,a}function Je(r,i){let a=r.getUint8(i.value);return i.value=i.value+1,a}let Me=function(r,i){let a;return"getBigInt64"in DataView.prototype?a=Number(r.getBigInt64(i.value,!0)):a=r.getUint32(i.value+4,!0)+Number(r.getUint32(i.value,!0)<<32),i.value+=8,a};function Ee(r,i){let a=r.getFloat32(i.value,!0);return i.value+=4,a}function At(r,i){return Yn.toHalfFloat(Ee(r,i))}function U(r){let i=(r&31744)>>10,a=r&1023;return(r>>15?-1:1)*(i?i===31?a?NaN:1/0:Math.pow(2,i-15)*(1+a/1024):6103515625e-14*(a/1024))}function fn(r,i){let a=r.getUint16(i.value,!0);return i.value+=2,a}function Ct(r,i){return U(fn(r,i))}function zt(r,i,a,u){let v=a.value,f=[];for(;a.value<v+u-1;){let y=Tn(i,a),E=hn(r,a),x=Je(r,a);a.value+=3;let m=hn(r,a),S=hn(r,a);f.push({name:y,pixelType:E,pLinear:x,xSampling:m,ySampling:S})}return a.value+=1,f}function Tt(r,i){let a=Ee(r,i),u=Ee(r,i),v=Ee(r,i),f=Ee(r,i),y=Ee(r,i),E=Ee(r,i),x=Ee(r,i),m=Ee(r,i);return{redX:a,redY:u,greenX:v,greenY:f,blueX:y,blueY:E,whiteX:x,whiteY:m}}function Nt(r,i){let a=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],u=Je(r,i);return a[u]}function Mt(r,i){let a=Ae(r,i),u=Ae(r,i),v=Ae(r,i),f=Ae(r,i);return{xMin:a,yMin:u,xMax:v,yMax:f}}function Ft(r,i){let a=["INCREASING_Y"],u=Je(r,i);return a[u]}function Rt(r,i){let a=Ee(r,i),u=Ee(r,i);return[a,u]}function Ot(r,i){let a=Ee(r,i),u=Ee(r,i),v=Ee(r,i);return[a,u,v]}function Dt(r,i,a,u,v){if(u==="string"||u==="stringvector"||u==="iccProfile")return xt(i,a,v);if(u==="chlist")return zt(r,i,a,v);if(u==="chromaticities")return Tt(r,a);if(u==="compression")return Nt(r,a);if(u==="box2i")return Mt(r,a);if(u==="lineOrder")return Ft(r,a);if(u==="float")return Ee(r,a);if(u==="v2f")return Rt(r,a);if(u==="v3f")return Ot(r,a);if(u==="int")return hn(r,a);if(u==="rational")return It(r,a);if(u==="timecode")return Ut(r,a);if(u==="preview")return a.value+=v,"skipped";a.value+=v}function Zt(r,i,a){let u={};if(r.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");u.version=r.getUint8(4);let v=r.getUint8(5);u.spec={singleTile:!!(v&2),longName:!!(v&4),deepFormat:!!(v&8),multiPart:!!(v&16)},a.value=8;let f=!0;for(;f;){let y=Tn(i,a);if(y==0)f=!1;else{let E=Tn(i,a),x=Ae(r,a),m=Dt(r,i,a,E,x);m===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${E}'.`):u[y]=m}}if(v!=0)throw console.error("EXRHeader:",u),new Error("THREE.EXRLoader: provided file is currently unsupported.");return u}function _t(r,i,a,u,v){let f={size:0,viewer:i,array:a,offset:u,width:r.dataWindow.xMax-r.dataWindow.xMin+1,height:r.dataWindow.yMax-r.dataWindow.yMin+1,channels:r.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:r.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(r.compression){case"NO_COMPRESSION":f.lines=1,f.uncompress=Sr;break;case"RLE_COMPRESSION":f.lines=1,f.uncompress=yt;break;case"ZIPS_COMPRESSION":f.lines=1,f.uncompress=bn;break;case"ZIP_COMPRESSION":f.lines=16,f.uncompress=bn;break;case"PIZ_COMPRESSION":f.lines=32,f.uncompress=St;break;case"PXR24_COMPRESSION":f.lines=16,f.uncompress=Et;break;case"DWAA_COMPRESSION":f.lines=32,f.uncompress=Er;break;case"DWAB_COMPRESSION":f.lines=256,f.uncompress=Er;break;default:throw new Error("EXRLoader.parse: "+r.compression+" is unsupported")}if(f.scanlineBlockSize=f.lines,f.type==1)switch(v){case Fn:f.getter=Ct,f.inputSize=2;break;case gn:f.getter=fn,f.inputSize=2;break}else if(f.type==2)switch(v){case Fn:f.getter=Ee,f.inputSize=4;break;case gn:f.getter=At,f.inputSize=4}else throw new Error("EXRLoader.parse: unsupported pixelType "+f.type+" for "+r.compression+".");f.blockCount=(r.dataWindow.yMax+1)/f.scanlineBlockSize;for(let E=0;E<f.blockCount;E++)Me(i,u);f.outputChannels=f.channels==3?4:f.channels;let y=f.width*f.height*f.outputChannels;switch(v){case Fn:f.byteArray=new Float32Array(y),f.channels<f.outputChannels&&f.byteArray.fill(1,0,y);break;case gn:f.byteArray=new Uint16Array(y),f.channels<f.outputChannels&&f.byteArray.fill(15360,0,y);break;default:console.error("THREE.EXRLoader: unsupported type: ",v);break}return f.bytesPerLine=f.width*f.inputSize*f.channels,f.outputChannels==4?(f.format=Ar,f.encoding=Gn):(f.format=Cr,f.encoding=Gn),f}let Nn=new DataView(e),kt=new Uint8Array(e),pn={value:0},vn=Zt(Nn,e,pn),H=_t(vn,Nn,kt,pn,this.type),Ir={value:0},Bt={R:0,G:1,B:2,A:3,Y:0};for(let r=0;r<H.height/H.scanlineBlockSize;r++){let i=Ae(Nn,pn);H.size=Ae(Nn,pn),H.lines=i+H.scanlineBlockSize>H.height?H.height-i:H.scanlineBlockSize;let u=H.size<H.lines*H.bytesPerLine?H.uncompress(H):Sr(H);pn.value+=H.size;for(let v=0;v<H.scanlineBlockSize;v++){let f=v+r*H.scanlineBlockSize;if(f>=H.height)break;for(let y=0;y<H.channels;y++){let E=Bt[vn.channels[y].name];for(let x=0;x<H.width;x++){Ir.value=(v*(H.channels*H.width)+y*H.width+x)*H.inputSize;let m=(H.height-1-f)*(H.width*H.outputChannels)+x*H.outputChannels+E;H.byteArray[m]=H.getter(u,Ir)}}}}return{header:vn,width:H.width,height:H.height,data:H.byteArray,format:H.format,encoding:H.encoding,type:this.type}}setDataType(e){return this.type=e,this}load(e,t,o,s){function h(l,p){l.encoding=p.encoding,l.minFilter=Ke,l.magFilter=Ke,l.generateMipmaps=!1,l.flipY=!1,t&&t(l,p)}return super.load(e,h,o,s)}};var ai={moduleName:"EXRLoader",module:gr};export{ai as EXRLoaderModule};
/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/
