import{c as Fn,d as qe}from"../chunk-UWFHNPCD.js";import{Aa as Ee,Ga as Nn,La as Mn,ac as Rn,bc as On,ha as Pe,oa as Vr,ra as Tn,yb as Ke,za as De}from"../chunk-CQ5QUQVH.js";import{b as Xt}from"../chunk-KBNISIIW.js";var $e=class extends Rn{constructor(r){super(r)}load(r,t,i,l){let v=this,s=new Fn,p=new On(this.manager);return p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setPath(this.path),p.setWithCredentials(v.withCredentials),p.load(r,function(w){let u=v.parse(w);!u||(u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:Pe,s.wrapT=u.wrapT!==void 0?u.wrapT:Pe,s.magFilter=u.magFilter!==void 0?u.magFilter:Vr,s.minFilter=u.minFilter!==void 0?u.minFilter:Vr,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=Tn),u.mipmapCount===1&&(s.minFilter=Vr),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u))},i,l),s}};var We={};Xt(We,{AsyncCompress:()=>bt,AsyncDecompress:()=>$t,AsyncDeflate:()=>et,AsyncGunzip:()=>tt,AsyncGzip:()=>bt,AsyncInflate:()=>wn,AsyncUnzipInflate:()=>oa,AsyncUnzlib:()=>it,AsyncZipDeflate:()=>ea,AsyncZlib:()=>Kt,Compress:()=>en,DecodeUTF8:()=>Vt,Decompress:()=>lt,Deflate:()=>Hr,EncodeUTF8:()=>jt,Gunzip:()=>He,Gzip:()=>en,Inflate:()=>Tr,Unzip:()=>la,UnzipInflate:()=>ia,UnzipPassThrough:()=>pt,Unzlib:()=>Xe,Zip:()=>na,ZipDeflate:()=>ra,ZipPassThrough:()=>Ae,Zlib:()=>tn,compress:()=>Pt,compressSync:()=>nn,decompress:()=>Jt,decompressSync:()=>Qt,deflate:()=>nt,deflateSync:()=>Ne,gunzip:()=>at,gunzipSync:()=>Ge,gzip:()=>Pt,gzipSync:()=>nn,inflate:()=>gn,inflateSync:()=>ce,strFromU8:()=>yn,strToU8:()=>$r,unzip:()=>sa,unzipSync:()=>ua,unzlib:()=>ot,unzlibSync:()=>Pr,zip:()=>ta,zipSync:()=>aa,zlib:()=>qt,zlibSync:()=>an});var Dn={},Qe=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},kn=function(e){return new Worker(e)};try{URL.revokeObjectURL(Qe(""))}catch{Qe=function(r){return"data:application/javascript;charset=UTF-8,"+encodeURI(r)},kn=function(r){return new Worker(r,{type:"module"})}}var Wt=function(e,r,t,i,l){var v=kn(Dn[r]||(Dn[r]=Qe(e)));return v.onerror=function(s){return l(s.error,null)},v.onmessage=function(s){return l(null,s.data)},v.postMessage(t,i),v},L=Uint8Array,yr=Uint16Array,Yr=Uint32Array,oe=new L([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),le=new L([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ue=new L([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bn=function(e,r){for(var t=new yr(31),i=0;i<31;++i)t[i]=r+=1<<e[i-1];for(var l=new Yr(t[30]),i=1;i<30;++i)for(var v=t[i];v<t[i+1];++v)l[v]=v-t[i]<<5|i;return[t,l]},Ln=Bn(oe,2),ln=Ln[0],Le=Ln[1];ln[28]=258,Le[258]=28;var dn=Bn(le,0),Hn=dn[0],Ve=dn[1],xe=new yr(32768);for(P=0;P<32768;++P)Xr=(P&43690)>>>1|(P&21845)<<1,Xr=(Xr&52428)>>>2|(Xr&13107)<<2,Xr=(Xr&61680)>>>4|(Xr&3855)<<4,xe[P]=((Xr&65280)>>>8|(Xr&255)<<8)>>>1;var Xr,P,_r=function(e,r,t){for(var i=e.length,l=0,v=new yr(r);l<i;++l)++v[e[l]-1];var s=new yr(r);for(l=0;l<r;++l)s[l]=s[l-1]+v[l-1]<<1;var p;if(t){p=new yr(1<<r);var w=15-r;for(l=0;l<i;++l)if(e[l])for(var u=l<<4|e[l],g=r-e[l],x=s[e[l]-1]++<<g,N=x|(1<<g)-1;x<=N;++x)p[xe[x]>>>w]=u}else for(p=new yr(i),l=0;l<i;++l)e[l]&&(p[l]=xe[s[e[l]-1]++]>>>15-e[l]);return p},br=new L(288);for(P=0;P<144;++P)br[P]=8;var P;for(P=144;P<256;++P)br[P]=9;var P;for(P=256;P<280;++P)br[P]=7;var P;for(P=280;P<288;++P)br[P]=8;var P,ae=new L(32);for(P=0;P<32;++P)ae[P]=5;var P,Gn=_r(br,9,0),Xn=_r(br,9,1),Wn=_r(ae,5,0),Yn=_r(ae,5,1),_e=function(e){for(var r=e[0],t=1;t<e.length;++t)e[t]>r&&(r=e[t]);return r},Zr=function(e,r,t){var i=r/8|0;return(e[i]|e[i+1]<<8)>>(r&7)&t},ke=function(e,r){var t=r/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(r&7)},Ce=function(e){return(e/8|0)+(e&7&&1)},kr=function(e,r,t){(r==null||r<0)&&(r=0),(t==null||t>e.length)&&(t=e.length);var i=new(e instanceof yr?yr:e instanceof Yr?Yr:L)(t-r);return i.set(e.subarray(r,t)),i},ze=function(e,r,t){var i=e.length;if(!i||t&&!t.l&&i<5)return r||new L(0);var l=!r||t,v=!t||t.i;t||(t={}),r||(r=new L(i*3));var s=function(J){var Fr=r.length;if(J>Fr){var Nr=new L(Math.max(Fr*2,J));Nr.set(r),r=Nr}},p=t.f||0,w=t.p||0,u=t.b||0,g=t.l,x=t.d,N=t.m,D=t.n,M=i*8;do{if(!g){t.f=p=Zr(e,w,1);var F=Zr(e,w+1,3);if(w+=3,F)if(F==1)g=Xn,x=Yn,N=9,D=5;else if(F==2){var O=Zr(e,w,31)+257,H=Zr(e,w+10,15)+4,K=O+Zr(e,w+5,31)+1;w+=14;for(var W=new L(K),k=new L(19),C=0;C<H;++C)k[Ue[C]]=Zr(e,w+C*3,7);w+=H*3;for(var lr=_e(k),$=(1<<lr)-1,Ur=_r(k,lr,1),C=0;C<K;){var Y=Ur[Zr(e,w,$)];w+=Y&15;var R=Y>>>4;if(R<16)W[C++]=R;else{var b=0,G=0;for(R==16?(G=3+Zr(e,w,3),w+=2,b=W[C-1]):R==17?(G=3+Zr(e,w,7),w+=3):R==18&&(G=11+Zr(e,w,127),w+=7);G--;)W[C++]=b}}var or=W.subarray(0,O),V=W.subarray(O);N=_e(or),D=_e(V),g=_r(or,N,1),x=_r(V,D,1)}else throw"invalid block type";else{var R=Ce(w)+4,X=e[R-4]|e[R-3]<<8,_=R+X;if(_>i){if(v)throw"unexpected EOF";break}l&&s(u+X),r.set(e.subarray(R,_),u),t.b=u+=X,t.p=w=_*8;continue}if(w>M){if(v)throw"unexpected EOF";break}}l&&s(u+131072);for(var tr=(1<<N)-1,wr=(1<<D)-1,Sr=w;;Sr=w){var b=g[ke(e,w)&tr],sr=b>>>4;if(w+=b&15,w>M){if(v)throw"unexpected EOF";break}if(!b)throw"invalid length/literal";if(sr<256)r[u++]=sr;else if(sr==256){Sr=w,g=null;break}else{var fr=sr-254;if(sr>264){var C=sr-257,hr=oe[C];fr=Zr(e,w,(1<<hr)-1)+ln[C],w+=hr}var Cr=x[ke(e,w)&wr],gr=Cr>>>4;if(!Cr)throw"invalid distance";w+=Cr&15;var V=Hn[gr];if(gr>3){var hr=le[gr];V+=ke(e,w)&(1<<hr)-1,w+=hr}if(w>M){if(v)throw"unexpected EOF";break}l&&s(u+131072);for(var cr=u+fr;u<cr;u+=4)r[u]=r[u-V],r[u+1]=r[u+1-V],r[u+2]=r[u+2-V],r[u+3]=r[u+3-V];u=cr}}t.l=g,t.p=Sr,t.b=u,g&&(p=1,t.m=N,t.d=x,t.n=D)}while(!p);return u==r.length?r:kr(r,0,u)},dr=function(e,r,t){t<<=r&7;var i=r/8|0;e[i]|=t,e[i+1]|=t>>>8},ne=function(e,r,t){t<<=r&7;var i=r/8|0;e[i]|=t,e[i+1]|=t>>>8,e[i+2]|=t>>>16},Be=function(e,r){for(var t=[],i=0;i<e.length;++i)e[i]&&t.push({s:i,f:e[i]});var l=t.length,v=t.slice();if(!l)return[Wr,0];if(l==1){var s=new L(t[0].s+1);return s[t[0].s]=1,[s,1]}t.sort(function(K,W){return K.f-W.f}),t.push({s:-1,f:25001});var p=t[0],w=t[1],u=0,g=1,x=2;for(t[0]={s:-1,f:p.f+w.f,l:p,r:w};g!=l-1;)p=t[t[u].f<t[x].f?u++:x++],w=t[u!=g&&t[u].f<t[x].f?u++:x++],t[g++]={s:-1,f:p.f+w.f,l:p,r:w};for(var N=v[0].s,i=1;i<l;++i)v[i].s>N&&(N=v[i].s);var D=new yr(N+1),M=de(t[g-1],D,0);if(M>r){var i=0,F=0,R=M-r,X=1<<R;for(v.sort(function(W,k){return D[k.s]-D[W.s]||W.f-k.f});i<l;++i){var _=v[i].s;if(D[_]>r)F+=X-(1<<M-D[_]),D[_]=r;else break}for(F>>>=R;F>0;){var O=v[i].s;D[O]<r?F-=1<<r-D[O]++-1:++i}for(;i>=0&&F;--i){var H=v[i].s;D[H]==r&&(--D[H],++F)}M=r}return[new L(D),M]},de=function(e,r,t){return e.s==-1?Math.max(de(e.l,r,t+1),de(e.r,r,t+1)):r[e.s]=t},je=function(e){for(var r=e.length;r&&!e[--r];);for(var t=new yr(++r),i=0,l=e[0],v=1,s=function(w){t[i++]=w},p=1;p<=r;++p)if(e[p]==l&&p!=r)++v;else{if(!l&&v>2){for(;v>138;v-=138)s(32754);v>2&&(s(v>10?v-11<<5|28690:v-3<<5|12305),v=0)}else if(v>3){for(s(l),--v;v>6;v-=6)s(8304);v>2&&(s(v-3<<5|8208),v=0)}for(;v--;)s(l);v=1,l=e[p]}return[t.subarray(0,i),r]},te=function(e,r){for(var t=0,i=0;i<r.length;++i)t+=e[i]*r[i];return t},Ie=function(e,r,t){var i=t.length,l=Ce(r+2);e[l]=i&255,e[l+1]=i>>>8,e[l+2]=e[l]^255,e[l+3]=e[l+1]^255;for(var v=0;v<i;++v)e[l+v+4]=t[v];return(l+4+i)*8},rn=function(e,r,t,i,l,v,s,p,w,u,g){dr(r,g++,t),++l[256];for(var x=Be(l,15),N=x[0],D=x[1],M=Be(v,15),F=M[0],R=M[1],X=je(N),_=X[0],O=X[1],H=je(F),K=H[0],W=H[1],k=new yr(19),C=0;C<_.length;++C)k[_[C]&31]++;for(var C=0;C<K.length;++C)k[K[C]&31]++;for(var lr=Be(k,7),$=lr[0],Ur=lr[1],Y=19;Y>4&&!$[Ue[Y-1]];--Y);var b=u+5<<3,G=te(l,br)+te(v,ae)+s,or=te(l,N)+te(v,F)+s+14+3*Y+te(k,$)+(2*k[16]+3*k[17]+7*k[18]);if(b<=G&&b<=or)return Ie(r,g,e.subarray(w,w+u));var V,tr,wr,Sr;if(dr(r,g,1+(or<G)),g+=2,or<G){V=_r(N,D,0),tr=N,wr=_r(F,R,0),Sr=F;var sr=_r($,Ur,0);dr(r,g,O-257),dr(r,g+5,W-1),dr(r,g+10,Y-4),g+=14;for(var C=0;C<Y;++C)dr(r,g+3*C,$[Ue[C]]);g+=3*Y;for(var fr=[_,K],hr=0;hr<2;++hr)for(var Cr=fr[hr],C=0;C<Cr.length;++C){var gr=Cr[C]&31;dr(r,g,sr[gr]),g+=$[gr],gr>15&&(dr(r,g,Cr[C]>>>5&127),g+=Cr[C]>>>12)}}else V=Gn,tr=br,wr=Wn,Sr=ae;for(var C=0;C<p;++C)if(i[C]>255){var gr=i[C]>>>18&31;ne(r,g,V[gr+257]),g+=tr[gr+257],gr>7&&(dr(r,g,i[C]>>>23&31),g+=oe[gr]);var cr=i[C]&31;ne(r,g,wr[cr]),g+=Sr[cr],cr>3&&(ne(r,g,i[C]>>>5&8191),g+=le[cr])}else ne(r,g,V[i[C]]),g+=tr[i[C]];return ne(r,g,V[256]),g+tr[256]},bn=new Yr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wr=new L(0),Pn=function(e,r,t,i,l,v){var s=e.length,p=new L(i+s+5*(1+Math.ceil(s/7e3))+l),w=p.subarray(i,p.length-l),u=0;if(!r||s<8)for(var g=0;g<=s;g+=65535){var x=g+65535;x<s?u=Ie(w,u,e.subarray(g,x)):(w[g]=v,u=Ie(w,u,e.subarray(g,s)))}else{for(var N=bn[r-1],D=N>>>13,M=N&8191,F=(1<<t)-1,R=new yr(32768),X=new yr(F+1),_=Math.ceil(t/3),O=2*_,H=function(re){return(e[re]^e[re+1]<<_^e[re+2]<<O)&F},K=new Yr(25e3),W=new yr(288),k=new yr(32),C=0,lr=0,g=0,$=0,Ur=0,Y=0;g<s;++g){var b=H(g),G=g&32767,or=X[b];if(R[G]=or,X[b]=G,Ur<=g){var V=s-g;if((C>7e3||$>24576)&&V>423){u=rn(e,w,0,K,W,k,lr,$,Y,g-Y,u),$=C=lr=0,Y=g;for(var tr=0;tr<286;++tr)W[tr]=0;for(var tr=0;tr<30;++tr)k[tr]=0}var wr=2,Sr=0,sr=M,fr=G-or&32767;if(V>2&&b==H(g-fr))for(var hr=Math.min(D,V)-1,Cr=Math.min(32767,g),gr=Math.min(258,V);fr<=Cr&&--sr&&G!=or;){if(e[g+wr]==e[g+wr-fr]){for(var cr=0;cr<gr&&e[g+cr]==e[g+cr-fr];++cr);if(cr>wr){if(wr=cr,Sr=fr,cr>hr)break;for(var J=Math.min(fr,cr-2),Fr=0,tr=0;tr<J;++tr){var Nr=g-fr+tr+32768&32767,Ye=R[Nr],Me=Nr-Ye+32768&32767;Me>Fr&&(Fr=Me,or=Nr)}}}G=or,or=R[G],fr+=G-or+32768&32767}if(Sr){K[$++]=268435456|Le[wr]<<18|Ve[Sr];var pe=Le[wr]&31,Fe=Ve[Sr]&31;lr+=oe[pe]+le[Fe],++W[257+pe],++k[Fe],Ur=g+wr,++C}else K[$++]=e[g],++W[e[g]]}}u=rn(e,w,v,K,W,k,lr,$,Y,g-Y,u),!v&&u&7&&(u=Ie(w,u+1,Wr))}return kr(p,0,i+Ce(u)+l)},Kn=function(){for(var e=new Yr(256),r=0;r<256;++r){for(var t=r,i=9;--i;)t=(t&1&&3988292384)^t>>>1;e[r]=t}return e}(),se=function(){var e=-1;return{p:function(r){for(var t=e,i=0;i<r.length;++i)t=Kn[t&255^r[i]]^t>>>8;e=t},d:function(){return~e}}},sn=function(){var e=1,r=0;return{p:function(t){for(var i=e,l=r,v=t.length,s=0;s!=v;){for(var p=Math.min(s+2655,v);s<p;++s)l+=i+=t[s];i=(i&65535)+15*(i>>16),l=(l&65535)+15*(l>>16)}e=i,r=l},d:function(){return e%=65521,r%=65521,(e&255)<<24|e>>>8<<16|(r&255)<<8|r>>>8}}},jr=function(e,r,t,i,l){return Pn(e,r.level==null?6:r.level,r.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+r.mem,t,i,!l)},Te=function(e,r){var t={};for(var i in e)t[i]=e[i];for(var i in r)t[i]=r[i];return t},Zn=function(e,r,t){for(var i=e(),l=e.toString(),v=l.slice(l.indexOf("[")+1,l.lastIndexOf("]")).replace(/ /g,"").split(","),s=0;s<i.length;++s){var p=i[s],w=v[s];if(typeof p=="function"){r+=";"+w+"=";var u=p.toString();if(p.prototype)if(u.indexOf("[native code]")!=-1){var g=u.indexOf(" ",8)+1;r+=u.slice(g,u.indexOf("(",g))}else{r+=u;for(var x in p.prototype)r+=";"+w+".prototype."+x+"="+p.prototype[x].toString()}else r+=u}else t[w]=p}return[r,t]},Ze=[],Yt=function(e){var r=[];for(var t in e)(e[t]instanceof L||e[t]instanceof yr||e[t]instanceof Yr)&&r.push((e[t]=new e[t].constructor(e[t])).buffer);return r},qn=function(e,r,t,i){var l;if(!Ze[t]){for(var v="",s={},p=e.length-1,w=0;w<p;++w)l=Zn(e[w],v,s),v=l[0],s=l[1];Ze[t]=Zn(e[p],v,s)}var u=Te({},Ze[t][1]);return Wt(Ze[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+r.toString()+"}",t,u,Yt(u),i)},ue=function(){return[L,yr,Yr,oe,le,Ue,ln,Hn,Xn,Yn,xe,_r,_e,Zr,ke,Ce,kr,ze,ce,Jr,un]},ve=function(){return[L,yr,Yr,oe,le,Ue,Le,Ve,Gn,br,Wn,ae,xe,bn,Wr,_r,dr,ne,Be,de,je,te,Ie,rn,Ce,kr,Pn,jr,Ne,Jr]},$n=function(){return[vn,fn,q,se,Kn]},Jn=function(){return[hn,jn]},Qn=function(){return[cn,q,sn]},Vn=function(){return[rt]},Jr=function(e){return postMessage(e,[e.buffer])},un=function(e){return e&&e.size&&new L(e.size)},he=function(e,r,t,i,l,v){var s=qn(t,i,l,function(p,w){s.terminate(),v(p,w)});return s.postMessage([e,r],r.consume?[e.buffer]:[]),function(){s.terminate()}},Br=function(e){return e.ondata=function(r,t){return postMessage([r,t],[r.buffer])},function(r){return e.push(r.data[0],r.data[1])}},fe=function(e,r,t,i,l){var v,s=qn(e,i,l,function(p,w){p?(s.terminate(),r.ondata.call(r,p)):(w[1]&&s.terminate(),r.ondata.call(r,p,w[0],w[1]))});s.postMessage(t),r.push=function(p,w){if(v)throw"stream finished";if(!r.ondata)throw"no stream handler";s.postMessage([p,v=w],[p.buffer])},r.terminate=function(){s.terminate()}},Ar=function(e,r){return e[r]|e[r+1]<<8},vr=function(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24)>>>0},Je=function(e,r){return vr(e,r)+vr(e,r+4)*4294967296},q=function(e,r,t){for(;t;++r)e[r]=t,t>>>=8},vn=function(e,r){var t=r.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=r.level<2?4:r.level==9?2:0,e[9]=3,r.mtime!=0&&q(e,4,Math.floor(new Date(r.mtime||Date.now())/1e3)),t){e[3]=8;for(var i=0;i<=t.length;++i)e[i+10]=t.charCodeAt(i)}},hn=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var r=e[3],t=10;r&4&&(t+=e[10]|(e[11]<<8)+2);for(var i=(r>>3&1)+(r>>4&1);i>0;i-=!e[t++]);return t+(r&2)},jn=function(e){var r=e.length;return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0},fn=function(e){return 10+(e.filename&&e.filename.length+1||0)},cn=function(e,r){var t=r.level,i=t==0?0:t<6?1:t==9?3:2;e[0]=120,e[1]=i<<6|(i?32-2*i:1)},rt=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function pn(e,r){return!r&&typeof e=="function"&&(r=e,e={}),this.ondata=r,e}var Hr=function(){function e(r,t){!t&&typeof r=="function"&&(t=r,r={}),this.ondata=t,this.o=r||{}}return e.prototype.p=function(r,t){this.ondata(jr(r,this.o,0,0,!t),t)},e.prototype.push=function(r,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(r,t||!1)},e}();var et=function(){function e(r,t){fe([ve,function(){return[Br,Hr]}],this,pn.call(this,r,t),function(i){var l=new Hr(i.data);onmessage=Br(l)},6)}return e}();function nt(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return he(e,r,[ve],function(i){return Jr(Ne(i.data[0],i.data[1]))},0,t)}function Ne(e,r){return jr(e,r||{},0,0)}var Tr=function(){function e(r){this.s={},this.p=new L(0),this.ondata=r}return e.prototype.e=function(r){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new L(t+r.length);i.set(this.p),i.set(r,t),this.p=i},e.prototype.c=function(r){this.d=this.s.i=r||!1;var t=this.s.b,i=ze(this.p,this.o,this.s);this.ondata(kr(i,t,this.s.b),this.d),this.o=kr(i,this.s.b-32768),this.s.b=this.o.length,this.p=kr(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(r,t){this.e(r),this.c(t)},e}();var wn=function(){function e(r){this.ondata=r,fe([ue,function(){return[Br,Tr]}],this,0,function(){var t=new Tr;onmessage=Br(t)},7)}return e}();function gn(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return he(e,r,[ue],function(i){return Jr(ce(i.data[0],un(i.data[1])))},1,t)}function ce(e,r){return ze(e,r)}var en=function(){function e(r,t){this.c=se(),this.l=0,this.v=1,Hr.call(this,r,t)}return e.prototype.push=function(r,t){Hr.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){this.c.p(r),this.l+=r.length;var i=jr(r,this.o,this.v&&fn(this.o),t&&8,!t);this.v&&(vn(i,this.o),this.v=0),t&&(q(i,i.length-8,this.c.d()),q(i,i.length-4,this.l)),this.ondata(i,t)},e}();var bt=function(){function e(r,t){fe([ve,$n,function(){return[Br,Hr,en]}],this,pn.call(this,r,t),function(i){var l=new en(i.data);onmessage=Br(l)},8)}return e}();function Pt(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return he(e,r,[ve,$n,function(){return[nn]}],function(i){return Jr(nn(i.data[0],i.data[1]))},2,t)}function nn(e,r){r||(r={});var t=se(),i=e.length;t.p(e);var l=jr(e,r,fn(r),8),v=l.length;return vn(l,r),q(l,v-8,t.d()),q(l,v-4,i),l}var He=function(){function e(r){this.v=1,Tr.call(this,r)}return e.prototype.push=function(r,t){if(Tr.prototype.e.call(this,r),this.v){var i=this.p.length>3?hn(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Tr.prototype.c.call(this,t)},e}();var tt=function(){function e(r){this.ondata=r,fe([ue,Jn,function(){return[Br,Tr,He]}],this,0,function(){var t=new He;onmessage=Br(t)},9)}return e}();function at(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return he(e,r,[ue,Jn,function(){return[Ge]}],function(i){return Jr(Ge(i.data[0]))},3,t)}function Ge(e,r){return ze(e.subarray(hn(e),-8),r||new L(jn(e)))}var tn=function(){function e(r,t){this.c=sn(),this.v=1,Hr.call(this,r,t)}return e.prototype.push=function(r,t){Hr.prototype.push.call(this,r,t)},e.prototype.p=function(r,t){this.c.p(r);var i=jr(r,this.o,this.v&&2,t&&4,!t);this.v&&(cn(i,this.o),this.v=0),t&&q(i,i.length-4,this.c.d()),this.ondata(i,t)},e}();var Kt=function(){function e(r,t){fe([ve,Qn,function(){return[Br,Hr,tn]}],this,pn.call(this,r,t),function(i){var l=new tn(i.data);onmessage=Br(l)},10)}return e}();function qt(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return he(e,r,[ve,Qn,function(){return[an]}],function(i){return Jr(an(i.data[0],i.data[1]))},4,t)}function an(e,r){r||(r={});var t=sn();t.p(e);var i=jr(e,r,2,4);return cn(i,r),q(i,i.length-4,t.d()),i}var Xe=function(){function e(r){this.v=1,Tr.call(this,r)}return e.prototype.push=function(r,t){if(Tr.prototype.e.call(this,r),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Tr.prototype.c.call(this,t)},e}();var it=function(){function e(r){this.ondata=r,fe([ue,Vn,function(){return[Br,Tr,Xe]}],this,0,function(){var t=new Xe;onmessage=Br(t)},11)}return e}();function ot(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return he(e,r,[ue,Vn,function(){return[Pr]}],function(i){return Jr(Pr(i.data[0],un(i.data[1])))},5,t)}function Pr(e,r){return ze((rt(e),e.subarray(2,-4)),r)}var lt=function(){function e(r){this.G=He,this.I=Tr,this.Z=Xe,this.ondata=r}return e.prototype.push=function(r,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(r,t);else{if(this.p&&this.p.length){var i=new L(this.p.length+r.length);i.set(this.p),i.set(r,this.p.length)}else this.p=r;if(this.p.length>2){var l=this,v=function(){l.ondata.apply(l,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(v):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(v):new this.Z(v),this.s.push(this.p,t),this.p=null}}},e}();var $t=function(){function e(r){this.G=tt,this.I=wn,this.Z=it,this.ondata=r}return e.prototype.push=function(r,t){lt.prototype.push.call(this,r,t)},e}();function Jt(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?at(e,r,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?gn(e,r,t):ot(e,r,t)}function Qt(e,r){return e[0]==31&&e[1]==139&&e[2]==8?Ge(e,r):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ce(e,r):Pr(e,r)}var mn=function(e,r,t,i){for(var l in e){var v=e[l],s=r+l;v instanceof L?t[s]=[v,i]:Array.isArray(v)?t[s]=[v[0],Te(i,v[1])]:mn(v,s+"/",t,i)}},_n=typeof TextEncoder<"u"&&new TextEncoder,on=typeof TextDecoder<"u"&&new TextDecoder,st=0;try{on.decode(Wr,{stream:!0}),st=1}catch{}var ut=function(e){for(var r="",t=0;;){var i=e[t++],l=(i>127)+(i>223)+(i>239);if(t+l>e.length)return[r,kr(e,t-1)];l?l==3?(i=((i&15)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,r+=String.fromCharCode(55296|i>>10,56320|i&1023)):l&1?r+=String.fromCharCode((i&31)<<6|e[t++]&63):r+=String.fromCharCode((i&15)<<12|(e[t++]&63)<<6|e[t++]&63):r+=String.fromCharCode(i)}},Vt=function(){function e(r){this.ondata=r,st?this.t=new TextDecoder:this.p=Wr}return e.prototype.push=function(r,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(r,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var i=new L(this.p.length+r.length);i.set(this.p),i.set(r,this.p.length);var l=ut(i),v=l[0],s=l[1];if(t){if(s.length)throw"invalid utf-8 data";this.p=null}else this.p=s;this.ondata(v,t)},e}();var jt=function(){function e(r){this.ondata=r}return e.prototype.push=function(r,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata($r(r),this.d=t||!1)},e}();function $r(e,r){if(r){for(var t=new L(e.length),i=0;i<e.length;++i)t[i]=e.charCodeAt(i);return t}if(_n)return _n.encode(e);for(var l=e.length,v=new L(e.length+(e.length>>1)),s=0,p=function(g){v[s++]=g},i=0;i<l;++i){if(s+5>v.length){var w=new L(s+8+(l-i<<1));w.set(v),v=w}var u=e.charCodeAt(i);u<128||r?p(u):u<2048?(p(192|u>>6),p(128|u&63)):u>55295&&u<57344?(u=65536+(u&1023<<10)|e.charCodeAt(++i)&1023,p(240|u>>18),p(128|u>>12&63),p(128|u>>6&63),p(128|u&63)):(p(224|u>>12),p(128|u>>6&63),p(128|u&63))}return kr(v,0,s)}function yn(e,r){if(r){for(var t="",i=0;i<e.length;i+=16384)t+=String.fromCharCode.apply(null,e.subarray(i,i+16384));return t}else{if(on)return on.decode(e);var l=ut(e),v=l[0],s=l[1];if(s.length)throw"invalid utf-8 data";return v}}var vt=function(e){return e==1?3:e<6?2:e==9?1:0},ht=function(e,r){return r+30+Ar(e,r+26)+Ar(e,r+28)},ft=function(e,r,t){var i=Ar(e,r+28),l=yn(e.subarray(r+46,r+46+i),!(Ar(e,r+8)&2048)),v=r+46+i,s=vr(e,r+20),p=t&&s==4294967295?ct(e,v):[s,vr(e,r+24),vr(e,r+42)],w=p[0],u=p[1],g=p[2];return[Ar(e,r+10),w,u,l,v+Ar(e,r+30)+Ar(e,r+32),g]},ct=function(e,r){for(;Ar(e,r)!=1;r+=4+Ar(e,r+2));return[Je(e,r+12),Je(e,r+4),Je(e,r+20)]},qr=function(e){var r=0;if(e)for(var t in e){var i=e[t].length;if(i>65535)throw"extra field too long";r+=i+4}return r},ie=function(e,r,t,i,l,v,s,p){var w=i.length,u=t.extra,g=p&&p.length,x=qr(u);q(e,r,s!=null?33639248:67324752),r+=4,s!=null&&(e[r++]=20,e[r++]=t.os),e[r]=20,r+=2,e[r++]=t.flag<<1|(v==null&&8),e[r++]=l&&8,e[r++]=t.compression&255,e[r++]=t.compression>>8;var N=new Date(t.mtime==null?Date.now():t.mtime),D=N.getFullYear()-1980;if(D<0||D>119)throw"date not in range 1980-2099";if(q(e,r,D<<25|N.getMonth()+1<<21|N.getDate()<<16|N.getHours()<<11|N.getMinutes()<<5|N.getSeconds()>>>1),r+=4,v!=null&&(q(e,r,t.crc),q(e,r+4,v),q(e,r+8,t.size)),q(e,r+12,w),q(e,r+14,x),r+=16,s!=null&&(q(e,r,g),q(e,r+6,t.attrs),q(e,r+10,s),r+=14),e.set(i,r),r+=w,x)for(var M in u){var F=u[M],R=F.length;q(e,r,+M),q(e,r+2,R),e.set(F,r+4),r+=4+R}return g&&(e.set(p,r),r+=g),r},Sn=function(e,r,t,i,l){q(e,r,101010256),q(e,r+8,t),q(e,r+10,t),q(e,r+12,i),q(e,r+16,l)},Ae=function(){function e(r){this.filename=r,this.c=se(),this.size=0,this.compression=0}return e.prototype.process=function(r,t){this.ondata(null,r,t)},e.prototype.push=function(r,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(r),this.size+=r.length,t&&(this.crc=this.c.d()),this.process(r,t||!1)},e}();var ra=function(){function e(r,t){var i=this;t||(t={}),Ae.call(this,r),this.d=new Hr(t,function(l,v){i.ondata(null,l,v)}),this.compression=8,this.flag=vt(t.level)}return e.prototype.process=function(r,t){try{this.d.push(r,t)}catch(i){this.ondata(i,null,t)}},e.prototype.push=function(r,t){Ae.prototype.push.call(this,r,t)},e}();var ea=function(){function e(r,t){var i=this;t||(t={}),Ae.call(this,r),this.d=new et(t,function(l,v,s){i.ondata(l,v,s)}),this.compression=8,this.flag=vt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(r,t){this.d.push(r,t)},e.prototype.push=function(r,t){Ae.prototype.push.call(this,r,t)},e}();var na=function(){function e(r){this.ondata=r,this.u=[],this.d=1}return e.prototype.add=function(r){var t=this;if(this.d&2)throw"stream finished";var i=$r(r.filename),l=i.length,v=r.comment,s=v&&$r(v),p=l!=r.filename.length||s&&v.length!=s.length,w=l+qr(r.extra)+30;if(l>65535)throw"filename too long";var u=new L(w);ie(u,0,r,i,p);var g=[u],x=function(){for(var R=0,X=g;R<X.length;R++){var _=X[R];t.ondata(null,_,!1)}g=[]},N=this.d;this.d=0;var D=this.u.length,M=Te(r,{f:i,u:p,o:s,t:function(){r.terminate&&r.terminate()},r:function(){if(x(),N){var R=t.u[D+1];R?R.r():t.d=1}N=1}}),F=0;r.ondata=function(R,X,_){if(R)t.ondata(R,X,_),t.terminate();else if(F+=X.length,g.push(X),_){var O=new L(16);q(O,0,134695760),q(O,4,r.crc),q(O,8,F),q(O,12,r.size),g.push(O),M.c=F,M.b=w+F+16,M.crc=r.crc,M.size=r.size,N&&M.r(),N=1}else N&&x()},this.u.push(M)},e.prototype.end=function(){var r=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){!(r.d&1)||(r.u.splice(-1,1),r.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var r=0,t=0,i=0,l=0,v=this.u;l<v.length;l++){var s=v[l];i+=46+s.f.length+qr(s.extra)+(s.o?s.o.length:0)}for(var p=new L(i+22),w=0,u=this.u;w<u.length;w++){var s=u[w];ie(p,r,s,s.f,s.u,s.c,t,s.o),r+=46+s.f.length+qr(s.extra)+(s.o?s.o.length:0),t+=s.b}Sn(p,r,this.u.length,i,t),this.ondata(null,p,!0),this.d=2},e.prototype.terminate=function(){for(var r=0,t=this.u;r<t.length;r++){var i=t[r];i.t()}this.d=2},e}();function ta(e,r,t){if(t||(t=r,r={}),typeof t!="function")throw"no callback";var i={};mn(e,"",i,r);var l=Object.keys(i),v=l.length,s=0,p=0,w=v,u=new Array(v),g=[],x=function(){for(var F=0;F<g.length;++F)g[F]()},N=function(){var F=new L(p+22),R=s,X=p-s;p=0;for(var _=0;_<w;++_){var O=u[_];try{var H=O.c.length;ie(F,p,O,O.f,O.u,H);var K=30+O.f.length+qr(O.extra),W=p+K;F.set(O.c,W),ie(F,s,O,O.f,O.u,H,p,O.m),s+=16+K+(O.m?O.m.length:0),p=W+H}catch(k){return t(k,null)}}Sn(F,s,u.length,X,R),t(null,F)};v||N();for(var D=function(F){var R=l[F],X=i[R],_=X[0],O=X[1],H=se(),K=_.length;H.p(_);var W=$r(R),k=W.length,C=O.comment,lr=C&&$r(C),$=lr&&lr.length,Ur=qr(O.extra),Y=O.level==0?0:8,b=function(G,or){if(G)x(),t(G,null);else{var V=or.length;u[F]=Te(O,{size:K,crc:H.d(),c:or,f:W,m:lr,u:k!=R.length||lr&&C.length!=$,compression:Y}),s+=30+k+Ur+V,p+=76+2*(k+Ur)+($||0)+V,--v||N()}};if(k>65535&&b("filename too long",null),!Y)b(null,_);else if(K<16e4)try{b(null,Ne(_,O))}catch(G){b(G,null)}else g.push(nt(_,O,b))},M=0;M<w;++M)D(M);return x}function aa(e,r){r||(r={});var t={},i=[];mn(e,"",t,r);var l=0,v=0;for(var s in t){var p=t[s],w=p[0],u=p[1],g=u.level==0?0:8,x=$r(s),N=x.length,D=u.comment,M=D&&$r(D),F=M&&M.length,R=qr(u.extra);if(N>65535)throw"filename too long";var X=g?Ne(w,u):w,_=X.length,O=se();O.p(w),i.push(Te(u,{size:w.length,crc:O.d(),c:X,f:x,m:M,u:N!=s.length||M&&D.length!=F,o:l,compression:g})),l+=30+N+R+_,v+=76+2*(N+R)+(F||0)+_}for(var H=new L(v+22),K=l,W=v-l,k=0;k<i.length;++k){var x=i[k];ie(H,x.o,x,x.f,x.u,x.c.length);var C=30+x.f.length+qr(x.extra);H.set(x.c,x.o+C),ie(H,l,x,x.f,x.u,x.c.length,x.o,x.m),l+=16+C+(x.m?x.m.length:0)}return Sn(H,l,i.length,W,K),H}var pt=function(){function e(){}return e.prototype.push=function(r,t){this.ondata(null,r,t)},e.compression=0,e}();var ia=function(){function e(){var r=this;this.i=new Tr(function(t,i){r.ondata(null,t,i)})}return e.prototype.push=function(r,t){try{this.i.push(r,t)}catch(i){this.ondata(i,r,t)}},e.compression=8,e}();var oa=function(){function e(r,t){var i=this;t<32e4?this.i=new Tr(function(l,v){i.ondata(null,l,v)}):(this.i=new wn(function(l,v,s){i.ondata(l,v,s)}),this.terminate=this.i.terminate)}return e.prototype.push=function(r,t){this.i.terminate&&(r=kr(r,0)),this.i.push(r,t)},e.compression=8,e}();var la=function(){function e(r){this.onfile=r,this.k=[],this.o={0:pt},this.p=Wr}return e.prototype.push=function(r,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var l=Math.min(this.c,r.length),v=r.subarray(0,l);if(this.c-=l,this.d?this.d.push(v,!this.c):this.k[0].push(v),r=r.subarray(l),r.length)return this.push(r,t)}else{var s=0,p=0,w=void 0,u=void 0;this.p.length?r.length?(u=new L(this.p.length+r.length),u.set(this.p),u.set(r,this.p.length)):u=this.p:u=r;for(var g=u.length,x=this.c,N=x&&this.d,D=function(){var X,_=vr(u,p);if(_==67324752){s=1,w=p,M.d=null,M.c=0;var O=Ar(u,p+6),H=Ar(u,p+8),K=O&2048,W=O&8,k=Ar(u,p+26),C=Ar(u,p+28);if(g>p+30+k+C){var lr=[];M.k.unshift(lr),s=2;var $=vr(u,p+18),Ur=vr(u,p+22),Y=yn(u.subarray(p+30,p+=30+k),!K);$==4294967295?(X=W?[-2]:ct(u,p),$=X[0],Ur=X[1]):W&&($=-1),p+=C,M.c=$;var b,G={name:Y,compression:H,start:function(){if(!G.ondata)throw"no callback";if(!$)G.ondata(null,Wr,!0);else{var or=i.o[H];if(!or)throw"unknown compression type "+H;b=$<0?new or(Y):new or(Y,$,Ur),b.ondata=function(Sr,sr,fr){G.ondata(Sr,sr,fr)};for(var V=0,tr=lr;V<tr.length;V++){var wr=tr[V];b.push(wr,!1)}i.k[0]==lr&&i.c?i.d=b:b.push(Wr,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};$>=0&&(G.size=$,G.originalSize=Ur),M.onfile(G)}return"break"}else if(x){if(_==134695760)return w=p+=12+(x==-2&&8),s=3,M.c=0,"break";if(_==33639248)return w=p-=4,s=3,M.c=0,"break"}},M=this;p<g-4;++p){var F=D();if(F==="break")break}if(this.p=Wr,x<0){var R=s?u.subarray(0,w-12-(x==-2&&8)-(vr(u,w-16)==134695760&&4)):u.subarray(0,p);N?N.push(R,!!s):this.k[+(s==2)].push(R)}if(s&2)return this.push(u.subarray(p),t);this.p=u.subarray(p)}if(t){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(r){this.o[r.compression]=r},e}();function sa(e,r){if(typeof r!="function")throw"no callback";for(var t=[],i=function(){for(var N=0;N<t.length;++N)t[N]()},l={},v=e.length-22;vr(e,v)!=101010256;--v)if(!v||e.length-v>65558){r("invalid zip file",null);return}var s=Ar(e,v+8);s||r(null,{});var p=s,w=vr(e,v+16),u=w==4294967295;if(u){if(v=vr(e,v-12),vr(e,v)!=101075792){r("invalid zip file",null);return}p=s=vr(e,v+32),w=vr(e,v+48)}for(var g=function(N){var D=ft(e,w,u),M=D[0],F=D[1],R=D[2],X=D[3],_=D[4],O=D[5],H=ht(e,O);w=_;var K=function(k,C){k?(i(),r(k,null)):(l[X]=C,--s||r(null,l))};if(!M)K(null,kr(e,H,H+F));else if(M==8){var W=e.subarray(H,H+F);if(F<32e4)try{K(null,ce(W,new L(R)))}catch(k){K(k,null)}else t.push(gn(W,{size:R},K))}else K("unknown compression type "+M,null)},x=0;x<p;++x)g(x);return i}function ua(e){for(var r={},t=e.length-22;vr(e,t)!=101010256;--t)if(!t||e.length-t>65558)throw"invalid zip file";var i=Ar(e,t+8);if(!i)return{};var l=vr(e,t+16),v=l==4294967295;if(v){if(t=vr(e,t-12),vr(e,t)!=101075792)throw"invalid zip file";i=vr(e,t+32),l=vr(e,t+48)}for(var s=0;s<i;++s){var p=ft(e,l,v),w=p[0],u=p[1],g=p[2],x=p[3],N=p[4],D=p[5],M=ht(e,D);if(l=N,!w)r[x]=kr(e,M,M+u);else if(w==8)r[x]=ce(e.subarray(M,M+u),new L(g));else throw"unknown compression type "+w}return r}var En=class extends $e{constructor(r){super(r);this.type=Ee}parse(r){let lr=Math.pow(2.7182818,2.2);function $(n,a){for(var o=0,h=0;h<65536;++h)(h==0||n[h>>3]&1<<(h&7))&&(a[o++]=h);for(var f=o-1;o<65536;)a[o++]=0;return f}function Ur(n){for(var a=0;a<16384;a++)n[a]={},n[a].len=0,n[a].lit=0,n[a].p=null}let Y={l:0,c:0,lc:0};function b(n,a,o,h,f){for(;o<n;)a=a<<8|Cn(h,f),o+=8;o-=n,Y.l=a>>o&(1<<n)-1,Y.c=a,Y.lc=o}let G=new Array(59);function or(n){for(var a=0;a<=58;++a)G[a]=0;for(var a=0;a<65537;++a)G[n[a]]+=1;for(var o=0,a=58;a>0;--a){var h=o+G[a]>>1;G[a]=o,o=h}for(var a=0;a<65537;++a){var f=n[a];f>0&&(n[a]=f|G[f]++<<6)}}function V(n,a,o,h,f,c,y){for(var m=o,E=0,I=0;f<=c;f++){if(m.value-o.value>h)return!1;b(6,E,I,n,m);var U=Y.l;if(E=Y.c,I=Y.lc,y[f]=U,U==63){if(m.value-o.value>h)throw new Error("Something wrong with hufUnpackEncTable");b(8,E,I,n,m);var S=Y.l+6;if(E=Y.c,I=Y.lc,f+S>c+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)y[f++]=0;f--}else if(U>=59){var S=U-59+2;if(f+S>c+1)throw new Error("Something wrong with hufUnpackEncTable");for(;S--;)y[f++]=0;f--}}or(y)}function tr(n){return n&63}function wr(n){return n>>6}function Sr(n,a,o,h){for(;a<=o;a++){var f=wr(n[a]),c=tr(n[a]);if(f>>c)throw new Error("Invalid table entry");if(c>14){var y=h[f>>c-14];if(y.len)throw new Error("Invalid table entry");if(y.lit++,y.p){var m=y.p;y.p=new Array(y.lit);for(var E=0;E<y.lit-1;++E)y.p[E]=m[E]}else y.p=new Array(1);y.p[y.lit-1]=a}else if(c)for(var I=0,E=1<<14-c;E>0;E--){var y=h[(f<<14-c)+I];if(y.len||y.p)throw new Error("Invalid table entry");y.len=c,y.lit=a,I++}}return!0}let sr={c:0,lc:0};function fr(n,a,o,h){n=n<<8|Cn(o,h),a+=8,sr.c=n,sr.lc=a}let hr={c:0,lc:0};function Cr(n,a,o,h,f,c,y,m,E,I){if(n==a){h<8&&(fr(o,h,f,y),o=sr.c,h=sr.lc),h-=8;var U=o>>h,U=new Uint8Array([U])[0];if(E.value+U>I)return!1;for(var S=m[E.value-1];U-- >0;)m[E.value++]=S}else if(E.value<I)m[E.value++]=n;else return!1;hr.c=o,hr.lc=h}function gr(n){return n&65535}function cr(n){var a=gr(n);return a>32767?a-65536:a}let J={a:0,b:0};function Fr(n,a){var o=cr(n),h=cr(a),f=h,c=o+(f&1)+(f>>1),y=c,m=c-f;J.a=y,J.b=m}function Nr(n,a){var o=gr(n),h=gr(a),f=o-(h>>1)&65535,c=h+f-32768&65535;J.a=c,J.b=f}function Ye(n,a,o,h,f,c,y){for(var m=y<16384,E=o>f?f:o,I=1,U;I<=E;)I<<=1;for(I>>=1,U=I,I>>=1;I>=1;){for(var S=0,ur=S+c*(f-U),z=c*I,T=c*U,Z=h*I,B=h*U,j,er,pr,xr;S<=ur;S+=T){for(var nr=S,Lr=S+h*(o-U);nr<=Lr;nr+=B){var ar=nr+Z,mr=nr+z,Gr=mr+Z;m?(Fr(n[nr+a],n[mr+a]),j=J.a,pr=J.b,Fr(n[ar+a],n[Gr+a]),er=J.a,xr=J.b,Fr(j,er),n[nr+a]=J.a,n[ar+a]=J.b,Fr(pr,xr),n[mr+a]=J.a,n[Gr+a]=J.b):(Nr(n[nr+a],n[mr+a]),j=J.a,pr=J.b,Nr(n[ar+a],n[Gr+a]),er=J.a,xr=J.b,Nr(j,er),n[nr+a]=J.a,n[ar+a]=J.b,Nr(pr,xr),n[mr+a]=J.a,n[Gr+a]=J.b)}if(o&I){var mr=nr+z;m?Fr(n[nr+a],n[mr+a]):Nr(n[nr+a],n[mr+a]),j=J.a,n[mr+a]=J.b,n[nr+a]=j}}if(f&I)for(var nr=S,Lr=S+h*(o-U);nr<=Lr;nr+=B){var ar=nr+Z;m?Fr(n[nr+a],n[ar+a]):Nr(n[nr+a],n[ar+a]),j=J.a,n[ar+a]=J.b,n[nr+a]=j}U=I,I>>=1}return S}function Me(n,a,o,h,f,c,y,m,E,I){for(var U=0,S=0,ur=m,z=Math.trunc(f.value+(c+7)/8);f.value<z;)for(fr(U,S,o,f),U=sr.c,S=sr.lc;S>=14;){var T=U>>S-14&16383,Z=a[T];if(Z.len)S-=Z.len,Cr(Z.lit,y,U,S,o,h,f,E,I,ur),U=hr.c,S=hr.lc;else{if(!Z.p)throw new Error("hufDecode issues");var B;for(B=0;B<Z.lit;B++){for(var j=tr(n[Z.p[B]]);S<j&&f.value<z;)fr(U,S,o,f),U=sr.c,S=sr.lc;if(S>=j&&wr(n[Z.p[B]])==(U>>S-j&(1<<j)-1)){S-=j,Cr(Z.p[B],y,U,S,o,h,f,E,I,ur),U=hr.c,S=hr.lc;break}}if(B==Z.lit)throw new Error("hufDecode issues")}}var er=8-c&7;for(U>>=er,S-=er;S>0;){var Z=a[U<<14-S&16383];if(Z.len)S-=Z.len,Cr(Z.lit,y,U,S,o,h,f,E,I,ur),U=hr.c,S=hr.lc;else throw new Error("hufDecode issues")}return!0}function pe(n,a,o,h,f,c){var y={value:0},m=o.value,E=zr(a,o),I=zr(a,o);o.value+=4;var U=zr(a,o);if(o.value+=4,E<0||E>=65537||I<0||I>=65537)throw new Error("Something wrong with HUF_ENCSIZE");var S=new Array(65537),ur=new Array(16384);Ur(ur);var z=h-(o.value-m);if(V(n,a,o,z,E,I,S),U>8*(h-(o.value-m)))throw new Error("Something wrong with hufUncompress");Sr(S,E,I,ur),Me(S,ur,n,a,o,U,I,c,f,y)}function Fe(n,a,o){for(var h=0;h<o;++h)a[h]=n[a[h]]}function In(n){for(var a=1;a<n.length;a++){var o=n[a-1]+n[a]-128;n[a]=o}}function re(n,a){for(var o=0,h=Math.floor((n.length+1)/2),f=0,c=n.length-1;!(f>c||(a[f++]=n[o++],f>c));)a[f++]=n[h++]}function Un(n){for(var a=n.byteLength,o=new Array,h=0,f=new DataView(n);a>0;){var c=f.getInt8(h++);if(c<0){var y=-c;a-=y+1;for(var m=0;m<y;m++)o.push(f.getUint8(h++))}else{var y=c;a-=2;for(var E=f.getUint8(h++),m=0;m<y+1;m++)o.push(E)}}return o}function wt(n,a,o,h,f,c){var ar=new DataView(c.buffer),y=o[n.idx[0]].width,m=o[n.idx[0]].height,E=3,I=Math.floor(y/8),U=Math.ceil(y/8),S=Math.ceil(m/8),ur=y-(U-1)*8,z=m-(S-1)*8,T={value:0},Z=new Array(E),B=new Array(E),j=new Array(E),er=new Array(E),pr=new Array(E);for(let rr=0;rr<E;++rr)pr[rr]=a[n.idx[rr]],Z[rr]=rr<1?0:Z[rr-1]+U*S,B[rr]=new Float32Array(64),j[rr]=new Uint16Array(64),er[rr]=new Uint16Array(U*64);for(let rr=0;rr<S;++rr){var xr=8;rr==S-1&&(xr=z);var nr=8;for(let ir=0;ir<U;++ir){ir==U-1&&(nr=ur);for(let Q=0;Q<E;++Q)j[Q].fill(0),j[Q][0]=f[Z[Q]++],gt(T,h,j[Q]),mt(j[Q],B[Q]),yt(B[Q]);E==3&&St(B);for(let Q=0;Q<E;++Q)Et(B[Q],er[Q],ir*64)}let Ir=0;for(let ir=0;ir<E;++ir){let Q=o[n.idx[ir]].type;for(let Dr=8*rr;Dr<8*rr+xr;++Dr){Ir=pr[ir][Dr];for(let Qr=0;Qr<I;++Qr){let Mr=Qr*64+(Dr&7)*8;ar.setUint16(Ir+0*2*Q,er[ir][Mr+0],!0),ar.setUint16(Ir+1*2*Q,er[ir][Mr+1],!0),ar.setUint16(Ir+2*2*Q,er[ir][Mr+2],!0),ar.setUint16(Ir+3*2*Q,er[ir][Mr+3],!0),ar.setUint16(Ir+4*2*Q,er[ir][Mr+4],!0),ar.setUint16(Ir+5*2*Q,er[ir][Mr+5],!0),ar.setUint16(Ir+6*2*Q,er[ir][Mr+6],!0),ar.setUint16(Ir+7*2*Q,er[ir][Mr+7],!0),Ir+=8*2*Q}}if(I!=U)for(let Dr=8*rr;Dr<8*rr+xr;++Dr){let Qr=pr[ir][Dr]+8*I*2*Q,Mr=I*64+(Dr&7)*8;for(let Kr=0;Kr<nr;++Kr)ar.setUint16(Qr+Kr*2*Q,er[ir][Mr+Kr],!0)}}}for(var Lr=new Uint16Array(y),ar=new DataView(c.buffer),mr=0;mr<E;++mr){o[n.idx[mr]].decoded=!0;var Gr=o[n.idx[mr]].type;if(o[mr].type==2)for(var Se=0;Se<m;++Se){let rr=pr[mr][Se];for(var Or=0;Or<y;++Or)Lr[Or]=ar.getUint16(rr+Or*2*Gr,!0);for(var Or=0;Or<y;++Or)ar.setFloat32(rr+Or*2*Gr,A(Lr[Or]),!0)}}}function gt(n,a,o){for(var h,f=1;f<64;)h=a[n.value],h==65280?f=64:h>>8==255?f+=h&255:(o[f]=h,f++),n.value++}function mt(n,a){a[0]=A(n[0]),a[1]=A(n[1]),a[2]=A(n[5]),a[3]=A(n[6]),a[4]=A(n[14]),a[5]=A(n[15]),a[6]=A(n[27]),a[7]=A(n[28]),a[8]=A(n[2]),a[9]=A(n[4]),a[10]=A(n[7]),a[11]=A(n[13]),a[12]=A(n[16]),a[13]=A(n[26]),a[14]=A(n[29]),a[15]=A(n[42]),a[16]=A(n[3]),a[17]=A(n[8]),a[18]=A(n[12]),a[19]=A(n[17]),a[20]=A(n[25]),a[21]=A(n[30]),a[22]=A(n[41]),a[23]=A(n[43]),a[24]=A(n[9]),a[25]=A(n[11]),a[26]=A(n[18]),a[27]=A(n[24]),a[28]=A(n[31]),a[29]=A(n[40]),a[30]=A(n[44]),a[31]=A(n[53]),a[32]=A(n[10]),a[33]=A(n[19]),a[34]=A(n[23]),a[35]=A(n[32]),a[36]=A(n[39]),a[37]=A(n[45]),a[38]=A(n[52]),a[39]=A(n[54]),a[40]=A(n[20]),a[41]=A(n[22]),a[42]=A(n[33]),a[43]=A(n[38]),a[44]=A(n[46]),a[45]=A(n[51]),a[46]=A(n[55]),a[47]=A(n[60]),a[48]=A(n[21]),a[49]=A(n[34]),a[50]=A(n[37]),a[51]=A(n[47]),a[52]=A(n[50]),a[53]=A(n[56]),a[54]=A(n[59]),a[55]=A(n[61]),a[56]=A(n[35]),a[57]=A(n[36]),a[58]=A(n[48]),a[59]=A(n[49]),a[60]=A(n[57]),a[61]=A(n[58]),a[62]=A(n[62]),a[63]=A(n[63])}function yt(n){let a=.5*Math.cos(.7853975),o=.5*Math.cos(3.14159/16),h=.5*Math.cos(3.14159/8),f=.5*Math.cos(3*3.14159/16),c=.5*Math.cos(5*3.14159/16),y=.5*Math.cos(3*3.14159/8),m=.5*Math.cos(7*3.14159/16);for(var E=new Array(4),I=new Array(4),U=new Array(4),S=new Array(4),ur=0;ur<8;++ur){var z=ur*8;E[0]=h*n[z+2],E[1]=y*n[z+2],E[2]=h*n[z+6],E[3]=y*n[z+6],I[0]=o*n[z+1]+f*n[z+3]+c*n[z+5]+m*n[z+7],I[1]=f*n[z+1]-m*n[z+3]-o*n[z+5]-c*n[z+7],I[2]=c*n[z+1]-o*n[z+3]+m*n[z+5]+f*n[z+7],I[3]=m*n[z+1]-c*n[z+3]+f*n[z+5]-o*n[z+7],U[0]=a*(n[z+0]+n[z+4]),U[3]=a*(n[z+0]-n[z+4]),U[1]=E[0]+E[3],U[2]=E[1]-E[2],S[0]=U[0]+U[1],S[1]=U[3]+U[2],S[2]=U[3]-U[2],S[3]=U[0]-U[1],n[z+0]=S[0]+I[0],n[z+1]=S[1]+I[1],n[z+2]=S[2]+I[2],n[z+3]=S[3]+I[3],n[z+4]=S[3]-I[3],n[z+5]=S[2]-I[2],n[z+6]=S[1]-I[1],n[z+7]=S[0]-I[0]}for(var T=0;T<8;++T)E[0]=h*n[16+T],E[1]=y*n[16+T],E[2]=h*n[48+T],E[3]=y*n[48+T],I[0]=o*n[8+T]+f*n[24+T]+c*n[40+T]+m*n[56+T],I[1]=f*n[8+T]-m*n[24+T]-o*n[40+T]-c*n[56+T],I[2]=c*n[8+T]-o*n[24+T]+m*n[40+T]+f*n[56+T],I[3]=m*n[8+T]-c*n[24+T]+f*n[40+T]-o*n[56+T],U[0]=a*(n[T]+n[32+T]),U[3]=a*(n[T]-n[32+T]),U[1]=E[0]+E[3],U[2]=E[1]-E[2],S[0]=U[0]+U[1],S[1]=U[3]+U[2],S[2]=U[3]-U[2],S[3]=U[0]-U[1],n[0+T]=S[0]+I[0],n[8+T]=S[1]+I[1],n[16+T]=S[2]+I[2],n[24+T]=S[3]+I[3],n[32+T]=S[3]-I[3],n[40+T]=S[2]-I[2],n[48+T]=S[1]-I[1],n[56+T]=S[0]-I[0]}function St(n){for(var a=0;a<64;++a){var o=n[0][a],h=n[1][a],f=n[2][a];n[0][a]=o+1.5747*f,n[1][a]=o-.1873*h-.4682*f,n[2][a]=o+1.8556*h}}function Et(n,a,o){for(var h=0;h<64;++h)a[o+h]=qe.toHalfFloat(It(n[h]))}function It(n){return n<=1?Math.sign(n)*Math.pow(Math.abs(n),2.2):Math.sign(n)*Math.pow(lr,Math.abs(n)-1)}function xn(n){return new DataView(n.array.buffer,n.offset.value,n.size)}function Ut(n){var a=n.viewer.buffer.slice(n.offset.value,n.offset.value+n.size),o=new Uint8Array(Un(a)),h=new Uint8Array(o.length);return In(o),re(o,h),new DataView(h.buffer)}function be(n){var a=n.array.slice(n.offset.value,n.offset.value+n.size);typeof We>"u"&&console.error("THREE.EXRLoader: External library fflate.min.js required.");var o=Pr(a),h=new Uint8Array(o.length);return In(o),re(o,h),new DataView(h.buffer)}function xt(n){for(var a=n.viewer,o={value:n.offset.value},h=new Uint16Array(n.width*n.scanlineBlockSize*(n.channels*n.type)),f=new Uint8Array(8192),c=0,y=new Array(n.channels),m=0;m<n.channels;m++)y[m]={},y[m].start=c,y[m].end=y[m].start,y[m].nx=n.width,y[m].ny=n.lines,y[m].size=n.type,c+=y[m].nx*y[m].ny*y[m].size;var E=ge(a,o),I=ge(a,o);if(I>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(E<=I)for(var m=0;m<I-E+1;m++)f[m+E]=ee(a,o);var U=new Uint16Array(65536),S=$(f,U),ur=zr(a,o);pe(n.array,a,o,ur,h,c);for(var m=0;m<n.channels;++m)for(var z=y[m],T=0;T<y[m].size;++T)Ye(h,z.start+T,z.nx,z.size,z.ny,z.nx*z.size,S);Fe(U,h,c);for(var Z=0,B=new Uint8Array(h.buffer.byteLength),j=0;j<n.lines;j++)for(var er=0;er<n.channels;er++){var z=y[er],pr=z.nx*z.size,xr=new Uint8Array(h.buffer,z.end*2,pr*2);B.set(xr,Z),Z+=pr*2,z.end+=pr}return new DataView(B.buffer)}function At(n){var a=n.array.slice(n.offset.value,n.offset.value+n.size);typeof We>"u"&&console.error("THREE.EXRLoader: External library fflate.min.js required.");var o=Pr(a);let h=n.lines*n.channels*n.width,f=n.type==1?new Uint16Array(h):new Uint32Array(h),c=0,y=0,m=new Array(4);for(let E=0;E<n.lines;E++)for(let I=0;I<n.channels;I++){let U=0;switch(n.type){case 1:m[0]=c,m[1]=m[0]+n.width,c=m[1]+n.width;for(let S=0;S<n.width;++S)U+=o[m[0]++]<<8|o[m[1]++],f[y]=U,y++;break;case 2:m[0]=c,m[1]=m[0]+n.width,m[2]=m[1]+n.width,c=m[2]+n.width;for(let S=0;S<n.width;++S)U+=o[m[0]++]<<24|o[m[1]++]<<16|o[m[2]++]<<8,f[y]=U,y++;break}}return new DataView(f.buffer)}function An(n){var a=n.viewer,o={value:n.offset.value},h=new Uint8Array(n.width*n.lines*(n.channels*n.type*2)),f={version:Rr(a,o),unknownUncompressedSize:Rr(a,o),unknownCompressedSize:Rr(a,o),acCompressedSize:Rr(a,o),dcCompressedSize:Rr(a,o),rleCompressedSize:Rr(a,o),rleUncompressedSize:Rr(a,o),rleRawSize:Rr(a,o),totalAcUncompressedCount:Rr(a,o),totalDcUncompressedCount:Rr(a,o),acCompression:Rr(a,o)};if(f.version<2)throw new Error("EXRLoader.parse: "+ye.compression+" version "+f.version+" is unsupported");for(var c=new Array,y=ge(a,o)-2;y>0;){var m=Re(a.buffer,o),E=ee(a,o),I=E>>2&3,U=(E>>4)-1,S=new Int8Array([U])[0],ur=ee(a,o);c.push({name:m,index:S,type:ur,compression:I}),y-=m.length+3}for(var z=ye.channels,T=new Array(n.channels),Z=0;Z<n.channels;++Z){var B=T[Z]={},j=z[Z];B.name=j.name,B.compression=0,B.decoded=!1,B.type=j.pixelType,B.pLinear=j.pLinear,B.width=n.width,B.height=n.lines}for(var er={idx:new Array(3)},pr=0;pr<n.channels;++pr)for(var B=T[pr],Z=0;Z<c.length;++Z){var xr=c[Z];B.name==xr.name&&(B.compression=xr.compression,xr.index>=0&&(er.idx[xr.index]=pr),B.offset=pr)}if(f.acCompressedSize>0)switch(f.acCompression){case 0:var ar=new Uint16Array(f.totalAcUncompressedCount);pe(n.array,a,o,f.acCompressedSize,ar,f.totalAcUncompressedCount);break;case 1:var nr=n.array.slice(o.value,o.value+f.totalAcUncompressedCount),Lr=Pr(nr),ar=new Uint16Array(Lr.buffer);o.value+=f.totalAcUncompressedCount;break}if(f.dcCompressedSize>0){var mr={array:n.array,offset:o,size:f.dcCompressedSize},Gr=new Uint16Array(be(mr).buffer);o.value+=f.dcCompressedSize}if(f.rleRawSize>0){var nr=n.array.slice(o.value,o.value+f.rleCompressedSize),Lr=Pr(nr),Se=Un(Lr.buffer);o.value+=f.rleCompressedSize}for(var Or=0,rr=new Array(T.length),Z=0;Z<rr.length;++Z)rr[Z]=new Array;for(var Ir=0;Ir<n.lines;++Ir)for(var ir=0;ir<T.length;++ir)rr[ir].push(Or),Or+=T[ir].width*n.type*2;wt(er,rr,T,ar,Gr,h);for(var Z=0;Z<T.length;++Z){var B=T[Z];if(!B.decoded)switch(B.compression){case 2:for(var Q=0,Dr=0,Ir=0;Ir<n.lines;++Ir){for(var Qr=rr[Z][Q],Mr=0;Mr<B.width;++Mr){for(var Kr=0;Kr<2*B.type;++Kr)h[Qr++]=Se[Dr+Kr*B.width*B.height];Dr++}Q++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(h.buffer)}function Re(n,a){for(var o=new Uint8Array(n),h=0;o[a.value+h]!=0;)h+=1;var f=new TextDecoder().decode(o.slice(a.value,a.value+h));return a.value=a.value+h+1,f}function Ct(n,a,o){var h=new TextDecoder().decode(new Uint8Array(n).slice(a.value,a.value+o));return a.value=a.value+o,h}function zt(n,a){var o=we(n,a),h=zr(n,a);return[o,h]}function Tt(n,a){var o=zr(n,a),h=zr(n,a);return[o,h]}function we(n,a){var o=n.getInt32(a.value,!0);return a.value=a.value+4,o}function zr(n,a){var o=n.getUint32(a.value,!0);return a.value=a.value+4,o}function Cn(n,a){var o=n[a.value];return a.value=a.value+1,o}function ee(n,a){var o=n.getUint8(a.value);return a.value=a.value+1,o}let Rr=function(n,a){let o;return"getBigInt64"in DataView.prototype?o=Number(n.getBigInt64(a.value,!0)):o=n.getUint32(a.value+4,!0)+Number(n.getUint32(a.value,!0)<<32),a.value+=8,o};function Er(n,a){var o=n.getFloat32(a.value,!0);return a.value+=4,o}function Nt(n,a){return qe.toHalfFloat(Er(n,a))}function A(n){var a=(n&31744)>>10,o=n&1023;return(n>>15?-1:1)*(a?a===31?o?NaN:1/0:Math.pow(2,a-15)*(1+o/1024):6103515625e-14*(o/1024))}function ge(n,a){var o=n.getUint16(a.value,!0);return a.value+=2,o}function Mt(n,a){return A(ge(n,a))}function Ft(n,a,o,h){for(var f=o.value,c=[];o.value<f+h-1;){var y=Re(a,o),m=we(n,o),E=ee(n,o);o.value+=3;var I=we(n,o),U=we(n,o);c.push({name:y,pixelType:m,pLinear:E,xSampling:I,ySampling:U})}return o.value+=1,c}function Rt(n,a){var o=Er(n,a),h=Er(n,a),f=Er(n,a),c=Er(n,a),y=Er(n,a),m=Er(n,a),E=Er(n,a),I=Er(n,a);return{redX:o,redY:h,greenX:f,greenY:c,blueX:y,blueY:m,whiteX:E,whiteY:I}}function Ot(n,a){var o=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],h=ee(n,a);return o[h]}function Dt(n,a){var o=zr(n,a),h=zr(n,a),f=zr(n,a),c=zr(n,a);return{xMin:o,yMin:h,xMax:f,yMax:c}}function Zt(n,a){var o=["INCREASING_Y"],h=ee(n,a);return o[h]}function _t(n,a){var o=Er(n,a),h=Er(n,a);return[o,h]}function kt(n,a){var o=Er(n,a),h=Er(n,a),f=Er(n,a);return[o,h,f]}function Bt(n,a,o,h,f){if(h==="string"||h==="stringvector"||h==="iccProfile")return Ct(a,o,f);if(h==="chlist")return Ft(n,a,o,f);if(h==="chromaticities")return Rt(n,o);if(h==="compression")return Ot(n,o);if(h==="box2i")return Dt(n,o);if(h==="lineOrder")return Zt(n,o);if(h==="float")return Er(n,o);if(h==="v2f")return _t(n,o);if(h==="v3f")return kt(n,o);if(h==="int")return we(n,o);if(h==="rational")return zt(n,o);if(h==="timecode")return Tt(n,o);if(h==="preview")return o.value+=f,"skipped";o.value+=f}function Lt(n,a,o){let h={};if(n.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.");h.version=n.getUint8(4);let f=n.getUint8(5);h.spec={singleTile:!!(f&2),longName:!!(f&4),deepFormat:!!(f&8),multiPart:!!(f&16)},o.value=8;for(var c=!0;c;){var y=Re(a,o);if(y==0)c=!1;else{var m=Re(a,o),E=zr(n,o),I=Bt(n,a,o,m,E);I===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${m}'.`):h[y]=I}}if(f!=0)throw console.error("EXRHeader:",h),new Error("THREE.EXRLoader: provided file is currently unsupported.");return h}function dt(n,a,o,h,f){let c={size:0,viewer:a,array:o,offset:h,width:n.dataWindow.xMax-n.dataWindow.xMin+1,height:n.dataWindow.yMax-n.dataWindow.yMin+1,channels:n.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:n.channels[0].pixelType,uncompress:null,getter:null,format:null,encoding:null};switch(n.compression){case"NO_COMPRESSION":c.lines=1,c.uncompress=xn;break;case"RLE_COMPRESSION":c.lines=1,c.uncompress=Ut;break;case"ZIPS_COMPRESSION":c.lines=1,c.uncompress=be;break;case"ZIP_COMPRESSION":c.lines=16,c.uncompress=be;break;case"PIZ_COMPRESSION":c.lines=32,c.uncompress=xt;break;case"PXR24_COMPRESSION":c.lines=16,c.uncompress=At;break;case"DWAA_COMPRESSION":c.lines=32,c.uncompress=An;break;case"DWAB_COMPRESSION":c.lines=256,c.uncompress=An;break;default:throw new Error("EXRLoader.parse: "+n.compression+" is unsupported")}if(c.scanlineBlockSize=c.lines,c.type==1)switch(f){case De:c.getter=Mt,c.inputSize=2;break;case Ee:c.getter=ge,c.inputSize=2;break}else if(c.type==2)switch(f){case De:c.getter=Er,c.inputSize=4;break;case Ee:c.getter=Nt,c.inputSize=4}else throw new Error("EXRLoader.parse: unsupported pixelType "+c.type+" for "+n.compression+".");c.blockCount=(n.dataWindow.yMax+1)/c.scanlineBlockSize;for(var y=0;y<c.blockCount;y++)Rr(a,h);c.outputChannels=c.channels==3?4:c.channels;let m=c.width*c.height*c.outputChannels;switch(f){case De:c.byteArray=new Float32Array(m),c.channels<c.outputChannels&&c.byteArray.fill(1,0,m);break;case Ee:c.byteArray=new Uint16Array(m),c.channels<c.outputChannels&&c.byteArray.fill(15360,0,m);break;default:console.error("THREE.EXRLoader: unsupported type: ",f);break}return c.bytesPerLine=c.width*c.inputSize*c.channels,c.outputChannels==4?(c.format=Nn,c.encoding=Ke):(c.format=Mn,c.encoding=Ke),c}let Oe=new DataView(r),Ht=new Uint8Array(r),me={value:0},ye=Lt(Oe,r,me),d=dt(ye,Oe,Ht,me,this.type),zn={value:0},Gt={R:0,G:1,B:2,A:3,Y:0};for(let n=0;n<d.height/d.scanlineBlockSize;n++){let a=zr(Oe,me);d.size=zr(Oe,me),d.lines=a+d.scanlineBlockSize>d.height?d.height-a:d.scanlineBlockSize;let h=d.size<d.lines*d.bytesPerLine?d.uncompress(d):xn(d);me.value+=d.size;for(let f=0;f<d.scanlineBlockSize;f++){let c=f+n*d.scanlineBlockSize;if(c>=d.height)break;for(let y=0;y<d.channels;y++){let m=Gt[ye.channels[y].name];for(let E=0;E<d.width;E++){zn.value=(f*(d.channels*d.width)+y*d.width+E)*d.inputSize;let I=(d.height-1-c)*(d.width*d.outputChannels)+E*d.outputChannels+m;d.byteArray[I]=d.getter(h,zn)}}}}return{header:ye,width:d.width,height:d.height,data:d.byteArray,format:d.format,encoding:d.encoding,type:this.type}}setDataType(r){return this.type=r,this}load(r,t,i,l){function v(s,p){s.encoding=p.encoding,s.minFilter=Vr,s.magFilter=Vr,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,p)}return super.load(r,v,i,l)}};var va={moduleName:"EXRLoader",module:En};export{va as EXRLoaderModule};
/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/
